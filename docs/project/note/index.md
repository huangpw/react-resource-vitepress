---
layout: doc
---

# ğŸ†ReactåŸºç¡€ç¬”è®°

## è®¤è¯†React

### Reactæ˜¯ä»€ä¹ˆ

ä¸€ä¸ªä¸“æ³¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ï¼Œä¸»è¦ç”¨äºæ„å»ºUIç•Œé¢ï¼Œå’Œvueå’Œangularå¹¶ç§°å‰ç«¯ä¸‰å¤§æ¡†æ¶ã€‚

ä¸å¤¸å¼ çš„è¯´ï¼Œreactå¼•é¢†äº†å¾ˆå¤šæ–°æ€æƒ³ï¼Œä¸–ç•ŒèŒƒå›´å†…æ˜¯æœ€æµè¡Œçš„jså‰ç«¯æ¡†æ¶ï¼Œæœ€æ–°ç‰ˆæœ¬å·²ç»åˆ°äº†18ï¼ŒåŠ å…¥äº†è®¸å¤šå¾ˆæ£’çš„æ–°ç‰¹æ€§ã€‚

- Reactè‹±æ–‡æ–‡æ¡£ï¼šhttps://reactjs.org/
- Reactä¸­æ–‡æ–‡æ¡£ï¼šhttps://zh-hans.react.dev/
- Reactä¸­æ–‡ç¤¾åŒºï¼šhttps://link.zhihu.com/?target=http%3A//react-china.org/
- React Routerè‹±æ–‡æ–‡æ¡£ï¼šhttps://reactrouter.com/en/main
- Reduxè‹±æ–‡æ–‡æ¡£ï¼šhttps://redux.js.org/



### å­¦ä¹ ç½‘ç«™

- React17å­¦ä¹ ç¬”è®°ï¼šhttps://www.kancloud.cn/tjs5945111/react/879926

- React17å­¦ä¹ ç¬”è®°ï¼šhttps://www.yuque.com/fechaichai/qeamqf/xbai87
- é¡¹ç›®å®æˆ˜ï¼š[Reactå®æˆ˜--æ‰“é€ ç”»å»Šåº”ç”¨(ä¸Š)-æ…•è¯¾ç½‘ (imooc.com)](http://www.imooc.com/learn/507)                [Reactå®è·µå›¾ç‰‡ç”»å»Šåº”ç”¨ï¼ˆä¸‹ï¼‰ (imooc.com)](http://www.imooc.com/learn/652)



### Reactæœ‰ä»€ä¹ˆç‰¹ç‚¹

- **1.å£°æ˜å¼è®¾è®¡** âˆ’Reacté‡‡ç”¨å£°æ˜èŒƒå¼ï¼Œå¯ä»¥è½»æ¾æè¿°åº”ç”¨ã€‚

  >  å†™UIå°±å’Œå†™æ™®é€šçš„HTMLä¸€æ ·ï¼ŒæŠ›å¼ƒå‘½ä»¤å¼çš„ç¹çå®ç°ã€‚

  ![p9rzMjg.png](https://s1.ax1x.com/2023/05/11/p9rzMjg.png)

- **2.é«˜æ•ˆ** âˆ’Reacté€šè¿‡å¯¹DOMçš„æ¨¡æ‹Ÿï¼Œæœ€å¤§é™åº¦åœ°å‡å°‘ä¸DOMçš„äº¤äº’ã€‚

- **3.çµæ´»** âˆ’Reactå¯ä»¥ä¸å·²çŸ¥çš„åº“æˆ–æ¡†æ¶å¾ˆå¥½åœ°é…åˆã€‚

- **4.JSX** âˆ’ JSX æ˜¯ JavaScript è¯­æ³•çš„æ‰©å±•ã€‚React å¼€å‘ä¸ä¸€å®šä½¿ç”¨ JSX ï¼Œä½†æˆ‘ä»¬å»ºè®®ä½¿ç”¨å®ƒã€‚

- **5.ç»„ä»¶** âˆ’ é€šè¿‡ React æ„å»ºç»„ä»¶ï¼Œä½¿å¾—ä»£ç æ›´åŠ å®¹æ˜“å¾—åˆ°å¤ç”¨ï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„åº”ç”¨åœ¨å¤§é¡¹ç›®çš„å¼€å‘ä¸­ã€‚

  > ç»„ä»¶æ˜¯reactä¸­æœ€é‡è¦çš„å†…å®¹ï¼Œç»„ä»¶å¯ä»¥é€šè¿‡æ­ç§¯æœ¨çš„æ–¹å¼æ‹¼æˆä¸€ä¸ªå®Œæ•´çš„é¡µé¢ï¼Œé€šè¿‡ç»„ä»¶çš„æŠ½è±¡å¯ä»¥å¢åŠ å¤ç”¨èƒ½åŠ›å’Œæé«˜å¯ç»´æŠ¤æ€§ã€‚

  ![p9rzDb9.png](https://s1.ax1x.com/2023/05/11/p9rzDb9.png)

- **6.å•å‘å“åº”çš„æ•°æ®æµ** âˆ’ React å®ç°äº†å•å‘å“åº”çš„æ•°æ®æµï¼Œä»è€Œå‡å°‘äº†é‡å¤ä»£ç ï¼Œè¿™ä¹Ÿæ˜¯å®ƒä¸ºä»€ä¹ˆæ¯”ä¼ ç»Ÿæ•°æ®ç»‘å®šæ›´ç®€å•ã€‚

- **7.è·¨å¹³å°** âˆ’ ä½¿ç”¨ React Native å¼€å‘åŸç”Ÿç§»åŠ¨åº”ç”¨ã€‚

  > reactæ—¢å¯ä»¥å¼€å‘webåº”ç”¨ä¹Ÿå¯ä»¥ä½¿ç”¨åŒæ ·çš„è¯­æ³•å¼€å‘åŸç”Ÿåº”ç”¨ï¼ˆreact-nativeï¼‰ï¼Œæ¯”å¦‚å®‰å“å’Œiosåº”ç”¨ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨reactå¼€å‘VRåº”ç”¨ï¼Œæƒ³è±¡åŠ›ç©ºé—´åè¶³ï¼Œreactæ›´åƒæ˜¯ä¸€ä¸ª `å…ƒæ¡†æ¶`  ä¸ºå„ç§é¢†åŸŸèµ‹èƒ½ 



## ç¯å¢ƒåˆå§‹åŒ–

### ä¸ºç½‘ç«™æ·»åŠ  React

å®˜ç½‘æ–‡æ¡£ï¼šhttps://reactjs.bootcss.com/learn/add-react-to-a-website

#### ç¬¬ä¸€æ­¥ï¼šåœ¨é¡µé¢ä¸­æ·»åŠ ä¸€ä¸ª HTML å…ƒç´ 

åœ¨ `<body>` æ ‡ç­¾å†…çš„ä»»ä½•ä½ç½®æ”¾ç½®ä¸€ä¸ªç±»ä¼¼ `<div>` çš„â€œå®¹å™¨â€å…ƒç´ ã€‚

React å°†æŠŠè¯¥ HTML å…ƒç´ å†…çš„ä»»ä½•å†…å®¹æ›¿æ¢æ‰ï¼Œå› æ­¤ä¸€ä¸ªç©ºæ ‡ç­¾å³å¯ã€‚

ä½ å¯ä»¥æ ¹æ®éœ€è¦åœ¨é¡µé¢ä¸Šæ”¾ç½®ä»»æ„å¤šä¸ªç±»ä¼¼çš„ HTML å…ƒç´ ã€‚

```html
<!-- ... existing HTML ... -->

<div id="component-goes-here"></div>

<!-- ... existing HTML ... -->
```



#### ç¬¬äºŒæ­¥ï¼šæ·»åŠ  script æ ‡ç­¾

åœ¨ HTML é¡µé¢ä¸­ï¼Œå°†ä»¥ä¸‹ä¸‰ä¸ªæ–‡ä»¶é€šè¿‡ `<script>` æ ‡ç­¾æ·»åŠ åˆ° `</body>` æ ‡ç­¾å‰ï¼š

- [**react.development.js**](https://unpkg.com/react@17/umd/react.development.js) åŠ è½½ React æ ¸å¿ƒä»£ç ã€‚
- [**react-dom.development.js**](https://unpkg.com/react-dom@17/umd/react-dom.development.js) è®© React æ¸²æŸ“ HTML å…ƒç´ åˆ° [DOM](https://developer.mozilla.org/docs/Web/API/Document_Object_Model) ä¸­ã€‚
- **like_button.js** è¿™å°†æ˜¯ä½ åœ¨ç¬¬ä¸‰æ­¥ä¸­ç¼–å†™ç»„ä»¶çš„åœ°æ–¹ï¼

éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œå°† â€œdevelopment.jsâ€ æ–‡ä»¶æ›¿æ¢ä¸º â€œproduction.min.jsâ€ æ–‡ä»¶ã€‚

```html
<body>
<!-- end of the page -->
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <script src="like_button.js"></script>
</body>
```



#### ç¬¬ä¸‰æ­¥ï¼šåˆ›å»º React ç»„ä»¶

åˆ›å»ºä¸€ä¸ªåä¸º **like_button.js** æ–‡ä»¶å¹¶æ”¾ç½®åœ¨ HTML é¡µé¢æ—è¾¹ï¼Œç„¶åæ·»åŠ ä»¥ä¸‹ä»£ç ç‰‡æ®µå¹¶ä¿å­˜æ–‡ä»¶ã€‚

æ­¤ä»£ç ç‰‡æ®µå®šä¹‰äº†ä¸€ä¸ªåä¸º `LikeButton` çš„ React ç»„ä»¶ã€‚

```jsx
'use strict';

function LikeButton() {
  const [liked, setLiked] = React.useState(false);

  if (liked) {
    return 'You liked this!';
  }

  return React.createElement(
    'button',
    {
      onClick: () => setLiked(true),
    },
    'Like'
  );
}
```



#### ç¬¬å››æ­¥ï¼šå°† React ç»„ä»¶æ·»åŠ åˆ°é¡µé¢ä¸­

æœ€åï¼Œåœ¨ **like_button.js** æ–‡ä»¶çš„åº•éƒ¨æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œä»£ç ã€‚

è¿™ä¸¤è¡Œä»£ç ç”¨äºæ‰¾åˆ°ä½ åœ¨ç¬¬ä¸€æ­¥ä¸­æ·»åŠ åˆ° HTML æ–‡ä»¶ä¸­çš„ `<div>` æ ‡ç­¾ï¼Œç„¶ååœ¨å…¶ä¸­æ˜¾ç¤º â€œLikeâ€ æŒ‰é’®ã€‚

```js
const domContainer = document.getElementById('component-goes-here');
ReactDOM.render(React.createElement(LikeButton), domContainer);
```

**æ­å–œä½ ï¼ä½ åˆšåˆšå°†ç¬¬ä¸€ä¸ª React ç»„ä»¶æ˜¾ç¤ºåˆ°ä½ çš„ç½‘ç«™ä¸Šäº†ï¼**

- [æŸ¥çœ‹å®Œæ•´çš„ç¤ºä¾‹ä»£ç ](https://gist.github.com/rachelnabors/c64b3aeace8a191cf5ea6fb5202e66c9)

- [ä¸‹è½½å®Œæ•´ç¤ºä¾‹æ–‡ä»¶ï¼ˆå‹ç¼©ä¹‹å 2KBï¼‰](https://gist.github.com/rachelnabors/c64b3aeace8a191cf5ea6fb5202e66c9/archive/7b41a88cb1027c9b5d8c6aff5212ecd3d0493504.zip)

ç»„ä»¶å¯é‡ç”¨ï¼

åœ¨åŒä¸€ä¸ª HTML é¡µé¢ä¸­çš„ä¸åŒä½ç½®ä¸Šæ˜¾ç¤ºåŒä¸€ä¸ª React ç»„ä»¶ã€‚

å½“é¡µé¢çš„å„ä¸ªç”± React é©±åŠ¨çš„éƒ¨åˆ†äº’ç›¸ç‹¬ç«‹æ—¶ï¼Œè¿™ç§ä½¿ç”¨æ–¹å¼æ˜¯æœ€æœ‰ç”¨çš„ã€‚

ä½ å¯ä»¥æ”¾ç½®å¤šä¸ªå®¹å™¨å…ƒç´ å¹¶å¤šæ¬¡è°ƒç”¨ `ReactDOM.render()` æ¥å®ç°è¿™ä¸€éœ€æ±‚ã€‚

1. åœ¨ **index.html** æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªé¢å¤–çš„å®¹å™¨å…ƒç´  `<div id="component-goes-here-too"></div>`ã€‚
2. åœ¨ **like_button.js** æ–‡ä»¶ä¸­ä¸ºæ–°æ·»åŠ çš„å®¹å™¨å…ƒç´ æ·»åŠ ä¸€ä¸ªçš„ `ReactDOM.render()` è°ƒç”¨ï¼š

```js
ReactDOM.render(
  React.createElement(LikeButton),
  document.getElementById('component-goes-here')
);

ReactDOM.render(
  React.createElement(LikeButton),
  document.getElementById('component-goes-here-too')
);
```



#### ç¬¬äº”æ­¥ï¼šä¸ºç”Ÿäº§ç¯å¢ƒå‹ç¼© JavaScript ä»£ç 

æœªå‹ç¼©çš„ JavaScript ä»£ç ä¼šæ˜¾è‘—é™ä½é¡µé¢çš„åŠ è½½æ—¶é—´ã€‚

- **å¦‚æœæ²¡æœ‰å‹ç¼© JavaScript ä»£ç çš„æ­¥éª¤**ï¼Œ[è¿™é‡Œæ¨èä¸€ç§æ–¹å¼](https://gist.github.com/gaearon/42a2ffa41b8319948f9be4076286e1f3)ã€‚
- **å¦‚æœå·²ç»æœ‰å‹ç¼©æ­¥éª¤äº†**ï¼Œè¯·ç¡®ä¿éƒ¨ç½²çš„ HTML åŠ è½½çš„æ˜¯ä»¥ `production.min.js` ç»“å°¾çš„ React æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```html
<script src="https://unpkg.com/react@17/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js" crossorigin></script>
```



### ä½¿ç”¨è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®

#### ç¬¬ä¸€ç§ï¼šnpm+webpack

é€šè¿‡reactçš„è„šæ‰‹æ¶ï¼Œåˆ›å»ºé¡¹ç›®è¿›è¡Œå¼€å‘ï¼Œéƒ¨ç½²ã€‚

â€‹	â‘  å®‰è£…è„šæ‰‹æ¶Create React Appã€‚

```sh
$ cnpm install -g create-react-app
# OR
$ npm install -g create-react-app
```

â€‹	â‘¡ åˆ›å»ºé¡¹ç›®

```sh
$ create-react-app 01reactapp(é¡¹ç›®åç§°å¯ä»¥è‡ªå®šä¹‰)
```

â€‹	â‘¢ è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹

```sh
$ cd 01reactapp
```

â€‹	â‘£ å¯åŠ¨é¡¹ç›®

```sh
$ npm start
```

![react](https://typora-1306005259.cos.ap-guangzhou.myqcloud.com/typora/2021050114141719.png)



#### ç¬¬äºŒç§ï¼šyarn+webpack

â€‹	â‘  ä½¿ç”¨è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®

```bash
$ npx create-react-app react-basic
```

1. è¯´æ˜ï¼š 

2. 1. 1. npx create-react-app æ˜¯å›ºå®šå‘½ä»¤ï¼Œ`create-react-app`æ˜¯Reactè„šæ‰‹æ¶çš„åç§°ã€‚
      2. react-basicè¡¨ç¤ºé¡¹ç›®åç§°ï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼Œä¿æŒè¯­ä¹‰åŒ–ã€‚
      3. npx å‘½ä»¤ä¼šå¸®åŠ©æˆ‘ä»¬ä¸´æ—¶å®‰è£…create-react-appåŒ…ï¼Œç„¶ååˆå§‹åŒ–é¡¹ç›®å®Œæˆä¹‹åä¼šè‡ªè‡ªåŠ¨åˆ æ‰ï¼Œæ‰€ä»¥ä¸éœ€è¦å…¨å±€å®‰è£…create-react-app ã€‚

â€‹	â‘¡ è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹

```bash
$ cd react-basic
```

â€‹	â‘¢ å¯åŠ¨é¡¹ç›®

```bash
$ yarn start
# OR
$ npm start
```



#### ç¬¬ä¸‰ç§ï¼šyarn+vite

â€‹	â‘  ä½¿ç”¨è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®

```bash
$ npm create vite@latest
# OR
$ yarn create vite # æŠ¥é”™æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡
# OR 
$ yarn create-vite
```

â€‹	â‘¡ å¯åŠ¨é¡¹ç›®

```bash
$ yarn dev
```



### é¡¹ç›®ç»“æ„è¯´æ˜

-  ç›®å½•è¯´æ˜ 

1. 1. `src` ç›®å½•æ˜¯æˆ‘ä»¬å†™ä»£ç è¿›è¡Œé¡¹ç›®å¼€å‘çš„ç›®å½•
   2. `package.json`  ä¸­ä¿©ä¸ªæ ¸å¿ƒåº“ï¼šreact ã€react-dom

-  ç›®å½•è°ƒæ•´ 

1. 1. åˆ é™¤srcç›®å½•ä¸‹è‡ªå¸¦çš„æ‰€æœ‰æ–‡ä»¶ï¼Œåªä¿ç•™app.jsæ ¹ç»„ä»¶å’Œindex.js
   2. åˆ›å»ºindex.jsæ–‡ä»¶ä½œä¸ºé¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ä¹¦å†™reactä»£ç å³å¯

-  å…¥å£æ–‡ä»¶è¯´æ˜ 

```jsx
import React from 'react'
import ReactDOM from 'react-dom'
import './index.css'
// å¼•å…¥æ ¹ç»„ä»¶App
import App from './App'
// é€šè¿‡è°ƒç”¨ReactDOMçš„renderæ–¹æ³•æ¸²æŸ“Appæ ¹ç»„ä»¶åˆ°idä¸ºrootçš„domèŠ‚ç‚¹ä¸Š
ReactDOM.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
  document.getElementById('root')
)
```

![react](https://typora-1306005259.cos.ap-guangzhou.myqcloud.com/typora/20210501142748469.png)



## JSXåŸºç¡€

### JSXä»‹ç»

æ¦‚å¿µï¼šJSXæ˜¯ JavaScript XMLï¼ˆHTMLï¼‰çš„ç¼©å†™ï¼Œè¡¨ç¤ºåœ¨ JS ä»£ç ä¸­ä¹¦å†™ HTML ç»“æ„ ã€‚

ä½œç”¨ï¼šåœ¨Reactä¸­åˆ›å»ºHTMLç»“æ„ï¼ˆé¡µé¢UIç»“æ„ï¼‰ã€‚

ä¼˜åŠ¿ï¼š

1. é‡‡ç”¨ç±»ä¼¼äºHTMLçš„è¯­æ³•ï¼Œé™ä½å­¦ä¹ æˆæœ¬ï¼Œä¼šHTMLå°±ä¼šJSX
2. å……åˆ†åˆ©ç”¨JSè‡ªèº«çš„å¯ç¼–ç¨‹èƒ½åŠ›åˆ›å»ºHTMLç»“æ„

æ³¨æ„ï¼š

â€‹	JSX å¹¶ä¸æ˜¯æ ‡å‡†çš„ JS è¯­æ³•ï¼Œæ˜¯ JS çš„è¯­æ³•æ‰©å±•ï¼Œæµè§ˆå™¨é»˜è®¤æ˜¯ä¸è¯†åˆ«çš„ï¼Œè„šæ‰‹æ¶ä¸­å†…ç½®çš„ [@babel/plugin-transform-react-jsx](https://www.npmjs.com/package/@babel/plugin-transform-react-jsx) åŒ…ï¼Œç”¨æ¥è§£æè¯¥è¯­æ³•ã€‚

![p92zQUg.png](https://s1.ax1x.com/2023/05/16/p92zQUg.png)



### JSXè¯­æ³•

**ä¼˜ç‚¹ï¼š**

1. JSXæ‰§è¡Œæ›´å¿«ï¼Œç¼–è¯‘ä¸ºJavaScriptä»£ç æ—¶è¿›è¡Œä¼˜åŒ–

2. ç±»å‹æ›´å®‰å…¨ï¼Œç¼–è¯‘è¿‡ç¨‹å¦‚æœå‡ºé”™å°±ä¸èƒ½ç¼–è¯‘ï¼ŒåŠæ—¶å‘ç°é”™è¯¯

3. JSXç¼–å†™æ¨¡æ¿æ›´åŠ ç®€å•å¿«é€Ÿã€‚ï¼ˆä¸è¦è·ŸVUEæ¯”ï¼‰

**æ³¨æ„ï¼š**

1. JSXå¿…é¡»è¦æœ‰æ ¹èŠ‚ç‚¹ã€‚

2. æ­£å¸¸çš„æ™®é€šHTMLå…ƒç´ è¦å°å†™ã€‚å¦‚æœæ˜¯å¤§å†™ï¼Œé»˜è®¤è®¤ä¸ºæ˜¯ç»„ä»¶ã€‚



### JSXä¸­ä½¿ç”¨jsè¡¨è¾¾å¼

**è¯­æ³•**

1ã€ç”±HTMLå…ƒç´ æ„æˆ

2ã€ä¸­é—´å¦‚æœéœ€è¦æ’å…¥å˜é‡ç”¨{}

3ã€{}ä¸­é—´å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼

4ã€{}ä¸­é—´è¡¨è¾¾å¼ä¸­å¯ä»¥ä½¿ç”¨JSXå¯¹è±¡

5ã€å±æ€§å’Œhtmlå†…å®¹ä¸€æ ·éƒ½æ˜¯ç”¨{}æ¥æ’å…¥å†…å®¹

`{ JS è¡¨è¾¾å¼ }`

```jsx
const name = 'æŸ´æŸ´'

<h1>ä½ å¥½ï¼Œæˆ‘å«{name}</h1>   //    <h1>ä½ å¥½,æˆ‘å«æŸ´æŸ´</h1>
```

**å¯ä»¥ä½¿ç”¨çš„è¡¨è¾¾å¼**

1. å­—ç¬¦ä¸²ã€æ•°å€¼ã€å¸ƒå°”å€¼ã€nullã€undefinedã€objectï¼ˆ [] / {} ï¼‰
2. 1 + 2ã€'abc'.split('')ã€['a', 'b'].join('-')
3. fn()

**ç‰¹åˆ«æ³¨æ„**

> if è¯­å¥/ switch-case è¯­å¥/ å˜é‡å£°æ˜è¯­å¥ï¼Œè¿™äº›å«åšè¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼ï¼Œä¸èƒ½å‡ºç°åœ¨ `{}` ä¸­ï¼ï¼

**ä»£ç å®ç°**

App.css

```css
.bgRed{
  background-color: red;
}
```

```jsx
/* eslint-disable jsx-a11y/alt-text */
import React from "react";
import ReactDOM from "react-dom/client";
import "./index.css";
// import App from "./App";
// import reportWebVitals from "./reportWebVitals";

import "./App.css"

// JSXè¯­æ³•
let time = new Date().toLocaleTimeString();
let str = "å½“å‰æ—¶é—´æ˜¯ï¼š";
let element = (
  <div>
    <h1>helloworld</h1>
    <h2>{str + time}</h2>
  </div>
);

console.log(element)

let man = "å‘çƒ­";
let element2 = (
  <div>
    <h1>ä»Šå¤©æ˜¯å¦éš”ç¦»</h1>
    <h2>{man === "å‘çƒ­" ? <button>éš”ç¦»</button> : "èººåºŠä¸Š"}</h2>
  </div>
);

let element4 = (
  <div>
    <span>æ¨ªç€èºº</span>
    <span>ç«–ç€èºº</span>
  </div>
);
man = "æ­£å¸¸";
let element3 = (
  <div>
    <h1>ä»Šå¤©æ˜¯å¦éš”ç¦»</h1>
    <h2>{man === "å‘çƒ­" ? <button>éš”ç¦»</button> : element4}</h2>
  </div>
);

let color = 'bgRed'
let logo = 'https://www.baidu.com/img/pc_1c6e30772d5e4103103bd460913332f9.png'
//HTMLçš„æ ·å¼ç±»åè¦å†™className,å› ä¸ºclassåœ¨jså½“ä¸­æ˜¯å…³é”®è¯
let element5 = (
    <div className={color}>
        <img src={logo} />
        çº¢è‰²çš„èƒŒæ™¯é¢œè‰²
    </div>

)

let exampleStyle = {
  background:"skyblue",
  boderBottom:"1px solid red"
}

let element6 = (
  <div>
      <h1 style={exampleStyle}>helloworld</h1>
  </div>
)
```

```jsx
const root = ReactDOM.createRoot(document.querySelector("#root"));
root.render(element);
```



### JSXæ³¨é‡Š

å¿…é¡»åœ¨æ‹¬å·çš„è¡¨è¾¾å¼å†…ä¹¦å†™ï¼Œå¦åˆ™æŠ¥é”™ï¼š

`{/* è¿™é‡Œå†™æ³¨é‡Š */}`

```jsx
letÂ classStr2Â =Â ['abc2','redBg2'].join("Â ")
letÂ element3Â =Â (
Â Â Â Â <div>
Â Â Â Â Â Â Â Â {/*Â è¿™é‡Œå†™æ³¨é‡ŠÂ */}
Â Â Â Â Â Â Â Â <h1Â className={classStr2}Â style={exampleStyle}>helloworld</h1>
Â Â Â Â </div>
)
```



### JSXå…ƒç´ æ¸²æŸ“

```jsx
letÂ h1Â =Â <h1>helloworld</h1>;
ä½¿ç”¨JSXçš„å†™æ³•ï¼Œå¯ä»¥åˆ›å»ºJSå…ƒç´ å¯¹è±¡
æ³¨æ„ï¼šJSXå…ƒç´ å¯¹è±¡ï¼Œæˆ–è€…ç»„ä»¶å¯¹è±¡ï¼Œå¿…é¡»åªæœ‰1ä¸ªæ ¹å…ƒç´ ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰
```

**ä»£ç å®ç°**

```jsx
//å®ç°é¡µé¢æ—¶åˆ»çš„æ˜¾ç¤º

function clock() {
  let time = new Date().toLocaleTimeString();
  let element = (
    <div>
      Â Â Â Â Â Â Â Â Â Â Â Â <h1>ç°åœ¨çš„æ—¶é—´æ˜¯{time}Â </h1>
      Â Â Â Â Â Â Â Â Â Â Â Â <h2>è¿™æ˜¯å‰¯æ ‡é¢˜</h2>
      Â Â Â Â Â Â Â Â 
    </div>
  );
  const root = ReactDOM.createRoot(document.querySelector("#root"));
  root.render(element);
}

clock();

setInterval(clock,1000)
```

```jsx
//å®ç°é¡µé¢æ—¶åˆ»çš„æ˜¾ç¤º

function Clock(props) {
  return (
    <div>
      <h1>ç°åœ¨çš„æ—¶é—´æ˜¯{props.date.toLocaleTimeString()}</h1>
      <h2>è¿™æ˜¯å‰¯æ ‡é¢˜</h2>
    </div>
  );
}

function run() {
  const root = ReactDOM.createRoot(document.querySelector("#root"));
  root.render(<Clock date={new Date()} />);
}

run();

setInterval(run,1000)
```



### JSXåˆ—è¡¨æ¸²æŸ“

å®ç°ï¼šä½¿ç”¨æ•°ç»„çš„`map` æ–¹æ³•ã€‚

```jsx
// æ¥ä¸ªåˆ—è¡¨
const songs = [
  { id: 1, name: 'ç—´å¿ƒç»å¯¹' },
  { id: 2, name: 'åƒæˆ‘è¿™æ ·çš„äºº' },
  { id: 3, name: 'å—å±±å—' }
]

function App() {
  return (
    <div className="App">
      <ul>
        {
          songs.map(item => <li>{item.name}</li>)
        }
      </ul>
    </div>
  )
}

export default App
```

æ³¨æ„ç‚¹ï¼šéœ€è¦ä¸ºéå†é¡¹æ·»åŠ  `key` å±æ€§ã€‚

![p92zwaF.png](https://s1.ax1x.com/2023/05/16/p92zwaF.png)

1. key åœ¨ HTML ç»“æ„ä¸­æ˜¯çœ‹ä¸åˆ°çš„ï¼Œæ˜¯ React å†…éƒ¨ç”¨æ¥è¿›è¡Œæ€§èƒ½ä¼˜åŒ–æ—¶ä½¿ç”¨ã€‚
2. key åœ¨å½“å‰åˆ—è¡¨ä¸­è¦å”¯ä¸€çš„å­—ç¬¦ä¸²æˆ–è€…æ•°å€¼ï¼ˆString/Numberï¼‰ã€‚
3. å¦‚æœåˆ—è¡¨ä¸­æœ‰åƒ id è¿™ç§çš„å”¯ä¸€å€¼ï¼Œå°±ç”¨ id æ¥ä½œä¸º key å€¼ã€‚
4. å¦‚æœåˆ—è¡¨ä¸­æ²¡æœ‰åƒ id è¿™ç§çš„å”¯ä¸€å€¼ï¼Œå°±å¯ä»¥ä½¿ç”¨ indexï¼ˆä¸‹æ ‡ï¼‰æ¥ä½œä¸º key å€¼ã€‚



### JSXæ¡ä»¶æ¸²æŸ“

ä½œç”¨ï¼šæ ¹æ®æ˜¯å¦æ»¡è¶³æ¡ä»¶ç”ŸæˆHTMLç»“æ„ï¼Œæ¯”å¦‚Loadingæ•ˆæœ

å®ç°ï¼šå¯ä»¥ä½¿ç”¨ `ä¸‰å…ƒè¿ç®—ç¬¦` æˆ–  `é€»è¾‘ä¸(&&)è¿ç®—ç¬¦`

```jsx
// æ¥ä¸ªå¸ƒå°”å€¼
const flag = true
function App() {
  return (
    <div className="App">
      {/* æ¡ä»¶æ¸²æŸ“å­—ç¬¦ä¸² */}
      {flag ? 'reactçœŸæœ‰è¶£' : 'vueçœŸæœ‰è¶£'}
      {/* æ¡ä»¶æ¸²æŸ“æ ‡ç­¾/ç»„ä»¶ */}
      {flag ? <span>this is span</span> : null}
    </div>
  )
}
export default App
```



### JSXæ ·å¼å¤„ç†

- è¡Œå†…æ ·å¼ - style 

```jsx
style={{ color: 'red' }}
```
```jsx
function App() {
  return (
    <div className="App">
      <div style={{ color: 'red' }}>this is a div</div>
    </div>
  )
}

export default App
```

- è¡Œå†…æ ·å¼ - style - æ›´ä¼˜å†™æ³• 

```jsx
style={ styleObj }
```

```jsx
const styleObj = {
    color:red
}

function App() {
  return (
    <div className="App">
      <div style={ styleObj }>this is a div</div>
    </div>
  )
}

export default App
```

- ç±»å - classNameï¼ˆæ¨èï¼‰

```css
.title {
  font-size: 30px;
  color: blue;
}
```

- ç±»å - className - åŠ¨æ€ç±»åæ§åˆ¶ 

```jsx
import './app.css'
const showTitle = true
function App() {
  return (
    <div className="App">
      <div className={ showTitle ? 'title' : ''}>this is a div</div>
    </div>
  )
}
export default App
```

1ã€Classï¼Œstyleä¸­ï¼Œä¸å¯ä»¥å­˜åœ¨å¤šä¸ªclasså±æ€§

```jsx
<div class='abc'  class={'active'} />  é”™è¯¯çš„è¡¨ç¤º
```

2ã€styleæ ·å¼ä¸­ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªå•è¯çš„å±æ€§ç»„åˆï¼Œç¬¬äºŒä¸ªå•è¯å¼€å§‹ï¼Œé¦–å­—æ¯å¤§å†™ã€‚æˆ–è€…ç”¨å¼•å·å¼•èµ·æ¥ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚

```jsx
letÂ exampleStyleÂ =Â {
Â Â Â Â background:"skyblue",
Â Â Â Â borderBottom:"4pxÂ solidÂ red",
Â Â Â Â 'background-image':"url(https://www.baidu.com/img/pc_1c6e30772d5e4103103bd460913332f9.png)"
}
```

3ã€å¤šä¸ªç±»å…±å­˜çš„æ“ä½œ

```jsx
letÂ element2Â =Â (
Â Â Â Â <div>
Â Â Â Â Â Â Â Â <h1Â className={"abcÂ "+classStr}>helloworld</h1>
Â Â Â Â </div>
)


letÂ classStr2Â =Â ['abc2','redBg2'].join("Â ")
letÂ element3Â =Â (
Â Â Â Â <div>
Â Â Â Â Â Â Â Â {/*Â è¿™é‡Œå†™æ³¨é‡ŠÂ */}
Â Â Â Â Â Â Â Â <h1Â className={classStr2}Â style={exampleStyle}>helloworld</h1>
Â Â Â Â </div>
)
```



### JSXæ³¨æ„äº‹é¡¹

1. JSXå¿…é¡»æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰æ ¹èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨`<></>`ï¼ˆå¹½çµèŠ‚ç‚¹ï¼‰æ›¿ä»£ã€‚
2. æ‰€æœ‰æ ‡ç­¾å¿…é¡»å½¢æˆé—­åˆï¼Œæˆå¯¹é—­åˆæˆ–è€…è‡ªé—­åˆéƒ½å¯ä»¥ã€‚
3. JSXä¸­çš„è¯­æ³•æ›´åŠ è´´è¿‘JSè¯­æ³•ï¼Œå±æ€§åé‡‡ç”¨é©¼å³°å‘½åæ³•  `class -> className`  `for -> htmlFor` ã€‚
4. JSXæ”¯æŒå¤šè¡Œï¼ˆæ¢è¡Œï¼‰ï¼Œå¦‚æœéœ€è¦æ¢è¡Œï¼Œéœ€ä½¿ç”¨`()` åŒ…è£¹ï¼Œé˜²æ­¢bugå‡ºç°ã€‚



### VSCodeæ ¼å¼åŒ–é…ç½®

1.  å®‰è£…vsCode prettieræ’ä»¶ 
2.  ä¿®æ”¹é…ç½®æ–‡ä»¶ `setting.json` 

```json
{
  "git.enableSmartCommit": true,
  // ä¿®æ”¹æ³¨é‡Šé¢œè‰²
  "editor.tokenColorCustomizations": {
    "comments": {
      "fontStyle": "bold",
      "foreground": "#82e0aa"
    }
  },
  // é…ç½®æ–‡ä»¶ç±»å‹è¯†åˆ«
  "files.associations": {
    "*.js": "javascript",
    "*.json": "jsonc",
    "*.cjson": "jsonc",
    "*.wxss": "css",
    "*.wxs": "javascript"
  },
  "extensions.ignoreRecommendations": false,
  "files.exclude": {
    "**/.DS_Store": true,
    "**/.git": true,
    "**/.hg": true,
    "**/.svn": true,
    "**/CVS": true,
    "**/node_modules": false,
    "**/tmp": true
  },
  // "javascript.implicitProjectConfig.experimentalDecorators": true,
  "explorer.confirmDragAndDrop": false,
  "typescript.updateImportsOnFileMove.enabled": "prompt",
  "git.confirmSync": false,
  "editor.tabSize": 2,
  "editor.fontWeight": "500",
  "[json]": {},
  "editor.tabCompletion": "on",
  "vsicons.projectDetection.autoReload": true,
  "editor.fontFamily": "Monaco, 'Courier New', monospace, Meslo LG M for Powerline",
  "[html]": {
    "editor.defaultFormatter": "vscode.html-language-features"
  },
  "editor.fontSize": 16,
  "debug.console.fontSize": 14,
  "vsicons.dontShowNewVersionMessage": true,
  "editor.minimap.enabled": true,
  "emmet.extensionsPath": [
    ""
  ],
  // vue eslint start ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 
  "editor.formatOnSave": true,
  // eslinté…ç½®é¡¹ï¼Œä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤é”™è¯¯
  "editor.codeActionsOnSave": {
    "source.fixAll": true
  },
  "vetur.ignoreProjectWarning": true,
  // è®©veturä½¿ç”¨vsè‡ªå¸¦çš„jsæ ¼å¼åŒ–å·¥å…·
  // uni-appå’Œvue é¡¹ç›®ä½¿ç”¨
  "vetur.format.defaultFormatter.js": "vscode-typescript",
  "javascript.format.semicolons": "remove",
  // // æŒ‡å®š *.vue æ–‡ä»¶çš„æ ¼å¼åŒ–å·¥å…·ä¸ºvetur
  "[vue]": {
    "editor.defaultFormatter": "octref.vetur"
  },
  // // æŒ‡å®š *.js æ–‡ä»¶çš„æ ¼å¼åŒ–å·¥å…·ä¸ºvscodeè‡ªå¸¦
  "[javascript]": {
    "editor.defaultFormatter": "vscode.typescript-language-features"
  },
  // // é»˜è®¤ä½¿ç”¨prettieræ ¼å¼åŒ–æ”¯æŒçš„æ–‡ä»¶
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "prettier.jsxBracketSameLine": true,
  // å‡½æ•°å‰é¢åŠ ä¸ªç©ºæ ¼
  "javascript.format.insertSpaceBeforeFunctionParenthesis": true,
  "prettier.singleQuote": true,
  "prettier.semi": false,
  // eslint end
  // react
  // å½“æŒ‰tabé”®çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æç¤º
  "emmet.triggerExpansionOnTab": true,
  "emmet.showAbbreviationSuggestions": true,
  "emmet.includeLanguages": {
    // jsxçš„æç¤º
    "javascript": "javascriptreact",
    "vue-html": "html",
    "vue": "html",
    "wxml": "html"
  },
  // end
  "[jsonc]": {
    "editor.defaultFormatter": "vscode.json-language-features"
  },
  // @è·¯å¾„æç¤º
  "path-intellisense.mappings": {
    "@": "${workspaceRoot}/src"
  },
  "security.workspace.trust.untrustedFiles": "open",
  "git.ignoreMissingGitWarning": true,
  "window.zoomLevel": 1
}
```



## Reactç»„ä»¶åŸºç¡€

### ç»„ä»¶æ¦‚å¿µ

![p9rzDb9.png](https://s1.ax1x.com/2023/05/11/p9rzDb9.png)

### å‡½æ•°å¼ç»„ä»¶

**æ¦‚å¿µï¼š**ä½¿ç”¨ JS çš„å‡½æ•°ï¼ˆæˆ–ç®­å¤´å‡½æ•°ï¼‰åˆ›å»ºçš„ç»„ä»¶ï¼Œå°±å«åš`å‡½æ•°ç»„ä»¶` ã€‚

**ç»„ä»¶å®šä¹‰ä¸æ¸²æŸ“**

**ä»£ç å®ç°ä¸€**

```jsx
// å®šä¹‰å‡½æ•°ç»„ä»¶
function HelloFn () {
  return <div>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªå‡½æ•°ç»„ä»¶!</div>
}

// å®šä¹‰ç±»ç»„ä»¶
function App () {
  return (
    <div className="App">
      {/* æ¸²æŸ“å‡½æ•°ç»„ä»¶ */}
      <HelloFn />
      <HelloFn></HelloFn>
    </div>
  )
}
export default App
```

**ä»£ç å®ç°äºŒ**

```jsx
//å‡½æ•°å¼ç»„ä»¶
functionÂ Childcom(props){
Â Â Â Â console.log(props)

Â Â Â Â letÂ titleÂ =Â <h2>æˆ‘æ˜¯å‰¯æ ‡é¢˜</h2>
Â Â Â Â letÂ weatherÂ =Â props.weather
Â Â Â Â //æ¡ä»¶åˆ¤æ–­Â 
Â Â Â Â letÂ isGoÂ =Â weather==='ä¸‹é›¨'Â ?"ä¸å‡ºé—¨":"å‡ºé—¨"

Â Â Â Â returnÂ (
Â Â Â Â Â Â Â Â <div>
Â Â Â Â Â Â Â Â Â Â Â Â <h1>å‡½æ•°å¼ç»„ä»¶helloworld</h1>
Â Â Â Â Â Â Â Â Â Â Â Â {title}

Â Â Â Â Â Â Â Â Â Â Â Â <div>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â æ˜¯å¦å‡ºé—¨ï¼Ÿ
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span>{isGo}</span>
Â Â Â Â Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â </div>
Â Â Â Â )
}
const root = ReactDOM.createRoot(document.querySelector("#root"));
root.render(<Childcom weatherÂ ="ä¸ä¸‹é›¨" />);
```

**çº¦å®šè¯´æ˜**

1. ç»„ä»¶çš„åç§°**å¿…é¡»é¦–å­—æ¯å¤§å†™**ï¼Œreactå†…éƒ¨ä¼šæ ¹æ®è¿™ä¸ªæ¥åˆ¤æ–­æ˜¯ç»„ä»¶è¿˜æ˜¯æ™®é€šçš„HTMLæ ‡ç­¾ ã€‚
2. å‡½æ•°ç»„ä»¶**å¿…é¡»æœ‰è¿”å›å€¼**ï¼Œè¡¨ç¤ºè¯¥ç»„ä»¶çš„ UI ç»“æ„ï¼›å¦‚æœä¸éœ€è¦æ¸²æŸ“ä»»ä½•å†…å®¹ï¼Œåˆ™è¿”å› null ã€‚
3. ç»„ä»¶å°±åƒ HTML æ ‡ç­¾ä¸€æ ·å¯ä»¥è¢«æ¸²æŸ“åˆ°é¡µé¢ä¸­ã€‚ç»„ä»¶è¡¨ç¤ºçš„æ˜¯ä¸€æ®µç»“æ„å†…å®¹ï¼Œå¯¹äºå‡½æ•°ç»„ä»¶æ¥è¯´ï¼Œæ¸²æŸ“çš„å†…å®¹æ˜¯å‡½æ•°çš„**è¿”å›å€¼**å°±æ˜¯å¯¹åº”çš„å†…å®¹ ã€‚
4. ä½¿ç”¨å‡½æ•°åç§°ä½œä¸ºç»„ä»¶æ ‡ç­¾åç§°ï¼Œå¯ä»¥æˆå¯¹å‡ºç°ä¹Ÿå¯ä»¥è‡ªé—­åˆ ã€‚



### ç±»å¼ç»„ä»¶

**æ¦‚å¿µï¼š**ä½¿ç”¨ ES6 çš„ class åˆ›å»ºçš„ç»„ä»¶ï¼Œå«åšç±»ï¼ˆclassï¼‰ç»„ä»¶ ã€‚

**ç»„ä»¶å®šä¹‰ä¸æ¸²æŸ“**

**ä»£ç å®ç°ä¸€**

```jsx
// å¼•å…¥React
import React from 'react'

// å®šä¹‰ç±»ç»„ä»¶
class HelloC extends React.Component {
  render () {
    return <div>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªç±»ç»„ä»¶!</div>
  }
}

function App () {
  return (
    <div className="App">
      {/* æ¸²æŸ“ç±»ç»„ä»¶ */}
      <HelloC />
      <HelloC></HelloC>
    </div>
  )
}
export default App
```

**ä»£ç å®ç°äºŒ**

```jsx
class HelloWorld extends React.Component {
    render() {
        console.log(this)
        return (
            <div>
                <h1>ç±»ç»„ä»¶å®šä¹‰HELLOWORLD</h1>
                <h1>hello:{this.props.name}</h1>
               
            </div>
        )
    }
}

const root = ReactDOM.createRoot(document.querySelector("#root"));
root.render(<HelloWorld name="å¼ ä¸‰" />);
```



### å¤åˆç»„ä»¶

ç»„ä»¶ä¸­åˆæœ‰å…¶ä»–çš„ç»„ä»¶ï¼Œå¤åˆç»„ä»¶ä¸­ï¼Œæ—¢å¯ä»¥æœ‰ç±»ç»„ä»¶ï¼Œåˆå¯ä»¥æœ‰å‡½æ•°ç»„ä»¶ã€‚

```jsx
function Childcom(props) {
    let title = <h2>æˆ‘æ˜¯å‰¯æ ‡é¢˜</h2>
    let weatherÂ = props.weather
    let isGO = weatherÂ  === 'ä¸‹é›¨' ? 'ä¸å‡ºé—¨' : 'å‡ºé—¨'
    return (
        <div>
            <h1>å‡½æ•°å¼ç»„ä»¶Childcom</h1>
            {title}
            <div>
                æ˜¯å¦å‡ºé—¨ï¼Ÿ
                <span>{isGO}</span>
            </div>
        </div>
    );
}

class HelloWorld extends React.Component {
    render() {
        console.log(this)
        return (
            <div>
                <h1>ç±»ç»„ä»¶å®šä¹‰HELLOWORLD</h1>
                <h1>hello:{this.props.name}</h1>
                <Childcom weather={this.props.weather} ></Childcom>
            </div>
        )
    }
}

const root = ReactDOM.createRoot(document.querySelector("#root"));
root.render(<HelloWorld name="å¼ ä¸‰" weatherÂ ="ä¸‹é›¨" />);
```



### å‡½æ•°å¼ç»„ä»¶çš„äº‹ä»¶ç»‘å®š

#### 1. å¦‚ä½•ç»‘å®šäº‹ä»¶

-  è¯­æ³•
   on + äº‹ä»¶åç§° = { äº‹ä»¶å¤„ç†ç¨‹åº } ï¼Œæ¯”å¦‚ï¼š`<div onClick={ onClick }></div>` 
-  æ³¨æ„ç‚¹
   reactäº‹ä»¶é‡‡ç”¨é©¼å³°å‘½åæ³•ï¼Œæ¯”å¦‚ï¼šonMouseEnterã€onFocus 

**ä»£ç å®ç°**

```jsx
// å‡½æ•°ç»„ä»¶
function HelloFn () {
  // å®šä¹‰äº‹ä»¶å›è°ƒå‡½æ•°
  const clickHandler = () => {
    console.log('äº‹ä»¶è¢«è§¦å‘äº†')
  }
  return (
    // ç»‘å®šäº‹ä»¶
    <button onClick={clickHandler}>click me!</button>
  )
}
```

#### 2. è·å–äº‹ä»¶å¯¹è±¡

 è·å–äº‹ä»¶å¯¹è±¡eåªéœ€è¦åœ¨ äº‹ä»¶çš„å›è°ƒå‡½æ•°ä¸­ è¡¥å……ä¸€ä¸ªå½¢å‚eå³å¯æ‹¿åˆ°

```jsx
// å‡½æ•°ç»„ä»¶
function HelloFn () {
  // å®šä¹‰äº‹ä»¶å›è°ƒå‡½æ•°
  const clickHandler = (e) => {
    console.log('äº‹ä»¶è¢«è§¦å‘äº†', e)
  }
  return (
    // ç»‘å®šäº‹ä»¶
    <button onClick={clickHandler}>click me!</button>
  )
}
```

 

#### 3. ä¼ é€’é¢å¤–å‚æ•°

è§£å†³æ€è·¯: æ”¹é€ äº‹ä»¶ç»‘å®šä¸ºç®­å¤´å‡½æ•° åœ¨ç®­å¤´å‡½æ•°ä¸­å®Œæˆå‚æ•°çš„ä¼ é€’

```jsx
import React from "react"

// å¦‚ä½•è·å–é¢å¤–çš„å‚æ•°ï¼Ÿ
// onClick={ onDel } -> onClick={ () => onDel(id) }
// æ³¨æ„: ä¸€å®šä¸è¦åœ¨æ¨¡æ¿ä¸­å†™å‡ºå‡½æ•°è°ƒç”¨çš„ä»£ç  onClick = { onDel(id) }  bad!!!!!!

const TestComponent = () => {
  const list = [
    {
      id: 1001,
      name: 'react'
    },
    {
      id: 1002,
      name: 'vue'
    }
  ]
  const onDel = (e, id) => {
    console.log(e, id)
  }
  return (
      <ul>
        {list.map(item =>ï¼ˆ
           <li key={item.id}>
                {item.name}
                <button onClick={(e) => onDel(e, item.id)}>x</button>
           </li>
        ))}
      </ul>
  )
}

function App () {
  return (
    <div>
      <TestComponent />
    </div>
  )
}


export default App
```



### ç±»å¼ç»„ä»¶çš„äº‹ä»¶ç»‘å®š

> ç±»ç»„ä»¶ä¸­çš„äº‹ä»¶ç»‘å®šï¼Œæ•´ä½“çš„æ–¹å¼å’Œå‡½æ•°ç»„ä»¶å·®åˆ«ä¸å¤§ã€‚
>
> å”¯ä¸€éœ€è¦æ³¨æ„çš„ å› ä¸ºå¤„äºclassç±»è¯­å¢ƒä¸‹ æ‰€ä»¥å®šä¹‰äº‹ä»¶å›è°ƒå‡½æ•°ä»¥åŠå®šå®ƒå†™æ³•ä¸Šæœ‰ä¸åŒã€‚
>
> 1. å®šä¹‰çš„æ—¶å€™: class Fieldsè¯­æ³• 
> 2. ä½¿ç”¨çš„æ—¶å€™: éœ€è¦å€ŸåŠ©thiså…³é”®è¯è·å–

```jsx
import React from "react"
class CComponent extends React.Component {
  // class Fields
  clickHandler = (e, num) => {
    // è¿™é‡Œçš„thisæŒ‡å‘çš„æ˜¯æ­£ç¡®çš„å½“å‰çš„ç»„ä»¶å®ä¾‹å¯¹è±¡ 
    // å¯ä»¥éå¸¸æ–¹ä¾¿çš„é€šè¿‡thiså…³é”®è¯æ‹¿åˆ°ç»„ä»¶å®ä¾‹èº«ä¸Šçš„å…¶ä»–å±æ€§æˆ–è€…æ–¹æ³•
    console.log(this)
  }

  clickHandler1 () {
    // è¿™é‡Œçš„this ä¸æŒ‡å‘å½“å‰çš„ç»„ä»¶å®ä¾‹å¯¹è±¡è€ŒæŒ‡å‘undefined å­˜åœ¨thisä¸¢å¤±é—®é¢˜
    console.log(this)
  }

  render () {
    return (
      <div>
        <button onClick={(e) => this.clickHandler(e, '123')}>click me</button>
        <button onClick={this.clickHandler1}>click me</button>
      </div>
    )
  }
}

function App () {
  return (
    <div>
      <CComponent />
    </div>
  )
}

export default App
```



### ç»„ä»¶çŠ¶æ€State

åœ¨React hookå‡ºæ¥ä¹‹å‰ï¼Œå‡½æ•°å¼ç»„ä»¶æ˜¯æ²¡æœ‰è‡ªå·±çš„çŠ¶æ€çš„ã€‚

![p9vREAx.png](https://s1.ax1x.com/2023/05/31/p9vREAx.png)

#### 1. åˆå§‹åŒ–çŠ¶æ€

-  é€šè¿‡classçš„å®ä¾‹å±æ€§stateæ¥åˆå§‹åŒ– 
-  stateçš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ç»“æ„ï¼Œè¡¨ç¤ºä¸€ä¸ªç»„ä»¶å¯ä»¥æœ‰å¤šä¸ªæ•°æ®çŠ¶æ€ 

```jsx
class Counter extends React.Component {
  // åˆå§‹åŒ–çŠ¶æ€
  state = {
    count: 0
  }
  render() {
    return <button>è®¡æ•°å™¨</button>
  }
}
```

#### 2. è¯»å–çŠ¶æ€

-  é€šè¿‡this.stateæ¥è·å–çŠ¶æ€ 

```jsx
class Counter extends React.Component {
  // åˆå§‹åŒ–çŠ¶æ€
  state = {
    count: 0
  }
  render() {
    // è¯»å–çŠ¶æ€
    return <button>è®¡æ•°å™¨{this.state.count}</button>
  }
}
```

#### 3. ä¿®æ”¹çŠ¶æ€

-  è¯­æ³•
   `this.setState({ è¦ä¿®æ”¹çš„éƒ¨åˆ†æ•°æ® })` 
-  setStateæ–¹æ³•ä½œç”¨ 

1. 1. ä¿®æ”¹stateä¸­çš„æ•°æ®çŠ¶æ€
   2. æ›´æ–°UI

-  æ€æƒ³
   	æ•°æ®é©±åŠ¨è§†å›¾ï¼Œä¹Ÿå°±æ˜¯åªè¦ä¿®æ”¹æ•°æ®çŠ¶æ€ï¼Œé‚£ä¹ˆé¡µé¢å°±ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œdom ã€‚
-  æ³¨æ„äº‹é¡¹
   	**ä¸è¦ç›´æ¥ä¿®æ”¹stateä¸­çš„å€¼ï¼Œå¿…é¡»é€šè¿‡setStateæ–¹æ³•è¿›è¡Œä¿®æ”¹** ã€‚

```jsx
class Counter extends React.Component {
  // å®šä¹‰æ•°æ®
  state = {
    count: 0
  }
  // å®šä¹‰ä¿®æ”¹æ•°æ®çš„æ–¹æ³•
  setCount = () => {
    this.setState({
      count: this.state.count + 1
    })
  }
  // ä½¿ç”¨æ•°æ® å¹¶ç»‘å®šäº‹ä»¶
  render () {
    return <button onClick={this.setCount}>{this.state.count}</button>
  }
}
```



### thisé—®é¢˜è¯´æ˜

![p9vR1HI.png](https://s1.ax1x.com/2023/05/31/p9vR1HI.png)

éšç€jsæ ‡å‡†çš„å‘å±•ï¼Œä¸»æµçš„å†™æ³•å·²ç»å˜æˆäº†class fieldsï¼Œæ— éœ€è€ƒè™‘å¤ªå¤šthisé—®é¢˜ ã€‚



### Reactçš„çŠ¶æ€ä¸å¯å˜

**æ¦‚å¿µ**ï¼šä¸è¦ç›´æ¥ä¿®æ”¹çŠ¶æ€çš„å€¼ï¼Œè€Œæ˜¯åŸºäºå½“å‰çŠ¶æ€åˆ›å»ºæ–°çš„çŠ¶æ€å€¼ã€‚

**1. é”™è¯¯çš„ç›´æ¥ä¿®æ”¹**

```jsx
state = {
  count : 0,
  list: [1,2,3],
  person: {
     name:'jack',
     age:18
  }
}
// ç›´æ¥ä¿®æ”¹ç®€å•ç±»å‹Number
this.state.count++
++this.state.count
this.state.count += 1
this.state.count = 1

// ç›´æ¥ä¿®æ”¹æ•°ç»„
this.state.list.push(123)
this.state.list.spice(1,1)

// ç›´æ¥ä¿®æ”¹å¯¹è±¡
this.state.person.name = 'rose'
```

**2. åŸºäºå½“å‰çŠ¶æ€åˆ›å»ºæ–°å€¼**

```jsx
this.setState({
    count: this.state.count + 1
    list: [...this.state.list, 4],
    person: {
       ...this.state.person,
       // è¦†ç›–åŸæ¥çš„å±æ€§ å°±å¯ä»¥è¾¾åˆ°ä¿®æ”¹å¯¹è±¡ä¸­å±æ€§çš„ç›®çš„
       name: 'rose'
    }
})
```



### è¡¨å•å¤„ç†

ä½¿ç”¨Reactå¤„ç†è¡¨å•å…ƒç´ ï¼Œä¸€èˆ¬æœ‰ä¿©ç§æ–¹å¼ï¼š

1. å—æ§ç»„ä»¶ ï¼ˆæ¨èä½¿ç”¨ï¼‰
2. éå—æ§ç»„ä»¶ ï¼ˆäº†è§£ï¼‰

#### 1. å—æ§è¡¨å•ç»„ä»¶

> ä»€ä¹ˆæ˜¯å—æ§ç»„ä»¶ï¼Ÿ  `inputæ¡†è‡ªå·±çš„çŠ¶æ€è¢«Reactç»„ä»¶çŠ¶æ€æ§åˆ¶`
>
> Reactç»„ä»¶çš„çŠ¶æ€çš„åœ°æ–¹æ˜¯åœ¨stateä¸­ï¼Œinputè¡¨å•å…ƒç´ ä¹Ÿæœ‰è‡ªå·±çš„çŠ¶æ€æ˜¯åœ¨valueä¸­ï¼ŒReactå°†stateä¸è¡¨å•å…ƒç´ çš„å€¼ï¼ˆvalueï¼‰ç»‘å®šåˆ°ä¸€èµ·ï¼Œç”±stateçš„å€¼æ¥æ§åˆ¶è¡¨å•å…ƒç´ çš„å€¼ï¼Œä»è€Œä¿è¯å•ä¸€æ•°æ®æºç‰¹æ€§ã€‚

**å®ç°æ­¥éª¤**

ä»¥è·å–æ–‡æœ¬æ¡†çš„å€¼ä¸ºä¾‹ï¼Œå—æ§ç»„ä»¶çš„ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š

1. åœ¨ç»„ä»¶çš„stateä¸­å£°æ˜ä¸€ä¸ªç»„ä»¶çš„çŠ¶æ€æ•°æ®ã€‚
2. å°†çŠ¶æ€æ•°æ®è®¾ç½®ä¸ºinputæ ‡ç­¾å…ƒç´ çš„valueå±æ€§çš„å€¼ã€‚
3. ä¸ºinputæ·»åŠ changeäº‹ä»¶ï¼Œåœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­ï¼Œé€šè¿‡äº‹ä»¶å¯¹è±¡eè·å–åˆ°å½“å‰æ–‡æœ¬æ¡†çš„å€¼ï¼ˆ`å³ç”¨æˆ·å½“å‰è¾“å…¥çš„å€¼`ï¼‰ã€‚
4. è°ƒç”¨setStateæ–¹æ³•ï¼Œå°†æ–‡æœ¬æ¡†çš„å€¼ä½œä¸ºstateçŠ¶æ€çš„æœ€æ–°å€¼ã€‚

**ä»£ç å®ç°**

```jsx
import React from 'react'

class InputComponent extends React.Component {
  // å£°æ˜ç»„ä»¶çŠ¶æ€
  state = {
    message: 'this is message',
  }
  // å£°æ˜äº‹ä»¶å›è°ƒå‡½æ•°
  changeHandler = (e) => {
    this.setState({ message: e.target.value })
  }
  render () {
    return (
      <div>
        {/* ç»‘å®švalue ç»‘å®šäº‹ä»¶*/}
        <input value={this.state.message} onChange={this.changeHandler} />
      </div>
    )
  }
}


function App () {
  return (
    <div className="App">
      <InputComponent />
    </div>
  )
}
export default App
```

#### 2. éå—æ§è¡¨å•ç»„ä»¶

> ä»€ä¹ˆæ˜¯éå—æ§ç»„ä»¶ï¼Ÿ
>
> éå—æ§ç»„ä»¶å°±æ˜¯é€šè¿‡æ‰‹åŠ¨æ“ä½œdomçš„æ–¹å¼è·å–æ–‡æœ¬æ¡†çš„å€¼ï¼Œæ–‡æœ¬æ¡†çš„çŠ¶æ€ä¸å—reactç»„ä»¶çš„stateä¸­çš„çŠ¶æ€æ§åˆ¶ï¼Œç›´æ¥é€šè¿‡åŸç”Ÿdomè·å–è¾“å…¥æ¡†çš„å€¼ã€‚

**å®ç°æ­¥éª¤**

1. å¯¼å…¥`createRef` å‡½æ•°
2. è°ƒç”¨createRefå‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªrefå¯¹è±¡ï¼Œå­˜å‚¨åˆ°åä¸º`msgRef`çš„å®ä¾‹å±æ€§ä¸­
3. ä¸ºinputæ·»åŠ refå±æ€§ï¼Œå€¼ä¸º`msgRef`
4. åœ¨æŒ‰é’®çš„äº‹ä»¶å¤„ç†ç¨‹åºä¸­ï¼Œé€šè¿‡`msgRef.current`å³å¯æ‹¿åˆ°inputå¯¹åº”çš„domå…ƒç´ ï¼Œè€Œå…¶ä¸­`msgRef.current.value`æ‹¿åˆ°çš„å°±æ˜¯æ–‡æœ¬æ¡†çš„å€¼

**ä»£ç å®ç°**

```jsx
import React, { createRef } from 'react'

class InputComponent extends React.Component {
  // ä½¿ç”¨createRefäº§ç”Ÿä¸€ä¸ªå­˜æ”¾domçš„å¯¹è±¡å®¹å™¨
  msgRef = createRef()

  changeHandler = () => {
    console.log(this.msgRef.current.value)
  }

  render() {
    return (
      <div>
        {/* refç»‘å®š è·å–çœŸå®dom */}
        <input ref={this.msgRef} />
        <button onClick={this.changeHandler}>click</button>
      </div>
    )
  }
}

function App () {
  return (
    <div className="App">
      <InputComponent />
    </div>
  )
}
export default App
```



## Reactç»„ä»¶é€šä¿¡

### ç»„ä»¶é€šä¿¡çš„æ„ä¹‰

ç»„ä»¶æ˜¯ç‹¬ç«‹ä¸”å°é—­çš„å•å…ƒï¼Œé»˜è®¤æƒ…å†µä¸‹ç»„ä»¶**åªèƒ½ä½¿ç”¨è‡ªå·±çš„æ•°æ®ï¼ˆstateï¼‰** ã€‚

ç»„ä»¶åŒ–å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå®Œæ•´çš„åŠŸèƒ½ä¼šæ‹†åˆ†å¤šä¸ªç»„ä»¶ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¸å¯é¿å…çš„éœ€è¦äº’ç›¸ä¼ é€’ä¸€äº›æ•°æ®ã€‚

ä¸ºäº†èƒ½è®©å„ç»„ä»¶ä¹‹é—´å¯ä»¥è¿›è¡Œäº’ç›¸æ²Ÿé€šï¼Œæ•°æ®ä¼ é€’ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ç»„ä»¶é€šä¿¡ã€‚

1. çˆ¶å­å…³ç³» -  **æœ€é‡è¦çš„**
2. å…„å¼Ÿå…³ç³» -  **è‡ªå®šä¹‰äº‹ä»¶æ¨¡å¼äº§ç”ŸæŠ€æœ¯æ–¹æ³• eventBus  /  é€šè¿‡å…±åŒçš„çˆ¶ç»„ä»¶é€šä¿¡**
3. å…¶å®ƒå…³ç³» -  **mobx / redux / zustand**



### çˆ¶ä¼ å­å®ç°

**å®ç°æ­¥éª¤**

1.  çˆ¶ç»„ä»¶æä¾›è¦ä¼ é€’çš„æ•°æ®  -  `state` 
2.  ç»™å­ç»„ä»¶æ ‡ç­¾`æ·»åŠ å±æ€§`å€¼ä¸º stateä¸­çš„æ•°æ® 
3.  å­ç»„ä»¶ä¸­é€šè¿‡ `props` æ¥æ”¶çˆ¶ç»„ä»¶ä¸­ä¼ è¿‡æ¥çš„æ•°æ® 

4.  1. ç±»ç»„ä»¶ä½¿ç”¨this.propsè·å–propså¯¹è±¡
    2. å‡½æ•°å¼ç»„ä»¶ç›´æ¥é€šè¿‡å‚æ•°è·å–propså¯¹è±¡

![p9vR22F.png](https://s1.ax1x.com/2023/05/31/p9vR22F.png)

**ä»£ç å®ç°**

```jsx
import React from 'react'

// å‡½æ•°å¼å­ç»„ä»¶
function FSon(props) {
  console.log(props)
  return (
    <div>
      å­ç»„ä»¶1
      {props.msg}
    </div>
  )
}

// ç±»å­ç»„ä»¶
class CSon extends React.Component {
  render() {
    return (
      <div>
        å­ç»„ä»¶2
        {this.props.msg}
      </div>
    )
  }
}
// çˆ¶ç»„ä»¶
class App extends React.Component {
  state = {
    message: 'this is message'
  }
  render() {
    return (
      <div>
        <div>çˆ¶ç»„ä»¶</div>
        <FSon msg={this.state.message} />
        <CSon msg={this.state.message} />
      </div>
    )
  }
}

export default App
```



### propsè¯´æ˜

**1.  propsæ˜¯åªè¯»å¯¹è±¡ï¼ˆreadonlyï¼‰**

æ ¹æ®å•é¡¹æ•°æ®æµçš„è¦æ±‚ï¼Œå­ç»„ä»¶åªèƒ½è¯»å–propsä¸­çš„æ•°æ®ï¼Œä¸èƒ½è¿›è¡Œä¿®æ”¹ã€‚

**2. propså¯ä»¥ä¼ é€’ä»»æ„æ•°æ®**

æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ã€æ•°ç»„ã€å¯¹è±¡ã€`å‡½æ•°ã€JSX` ã€‚

**ä»£ç å®ç°**

```jsx
class App extends React.Component {
  state = {
    message: 'this is message'
  }
  render() {
    return (
      <div>
        <div>çˆ¶ç»„ä»¶</div>
        <FSon 
          msg={this.state.message} 
          age={20} 
          isMan={true} 
          cb={() => { console.log(1) }} 
          child={<span>this is child</span>}
        />
        <CSon msg={this.state.message} />
      </div>
    )
  }
}
```

![p9vRq2D.png](https://s1.ax1x.com/2023/05/31/p9vRq2D.png)



### å­ä¼ çˆ¶å®ç°

**å£è¯€ï¼š** çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’å›è°ƒå‡½æ•°ï¼Œå­ç»„ä»¶è°ƒç”¨

**å®ç°æ­¥éª¤**

1. çˆ¶ç»„ä»¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•° - ç”¨äºæ¥æ”¶æ•°æ®
2. å°†å‡½æ•°ä½œä¸ºå±æ€§çš„å€¼ï¼Œä¼ ç»™å­ç»„ä»¶
3. å­ç»„ä»¶é€šè¿‡propsè°ƒç”¨ å›è°ƒå‡½æ•°
4. å°†å­ç»„ä»¶ä¸­çš„æ•°æ®ä½œä¸ºå‚æ•°ä¼ é€’ç»™å›è°ƒå‡½æ•°

![p9vWCPf.png](https://s1.ax1x.com/2023/05/31/p9vWCPf.png)

**ä»£ç å®ç°**

```jsx
import React from 'react'

// å­ç»„ä»¶
function Son(props) {
  function handleClick() {
    // è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å›è°ƒå‡½æ•° å¹¶æ³¨å…¥å‚æ•°
    props.changeMsg('this is newMessage')
  }
  return (
    <div>
      {props.msg}
      <button onClick={handleClick}>change</button>
    </div>
  )
}


class App extends React.Component {
  state = {
    message: 'this is message'
  }
  // æä¾›å›è°ƒå‡½æ•°
  changeMessage = (newMsg) => {
    console.log('å­ç»„ä»¶ä¼ è¿‡æ¥çš„æ•°æ®:',newMsg)
    this.setState({
      message: newMsg
    })
  }
  render() {
    return (
      <div>
        <div>çˆ¶ç»„ä»¶</div>
        <Son
          msg={this.state.message}
          // ä¼ é€’ç»™å­ç»„ä»¶
          changeMsg={this.changeMessage}
        />
      </div>
    )
  }
}

export default App
```



### å…„å¼Ÿç»„ä»¶é€šä¿¡

**æ ¸å¿ƒæ€è·¯ï¼š** é€šè¿‡çŠ¶æ€æå‡æœºåˆ¶ï¼Œåˆ©ç”¨å…±åŒçš„çˆ¶ç»„ä»¶å®ç°å…„å¼Ÿé€šä¿¡

![p9vWlzF.png](https://s1.ax1x.com/2023/05/31/p9vWlzF.png)

**å®ç°æ­¥éª¤**

1. å°†å…±äº«çŠ¶æ€æå‡åˆ°æœ€è¿‘çš„å…¬å…±çˆ¶ç»„ä»¶ä¸­ï¼Œç”±å…¬å…±çˆ¶ç»„ä»¶ç®¡ç†è¿™ä¸ªçŠ¶æ€ 

- - æä¾›å…±äº«çŠ¶æ€
  - æä¾›æ“ä½œå…±äº«çŠ¶æ€çš„æ–¹æ³•

1. è¦æ¥æ”¶æ•°æ®çŠ¶æ€çš„å­ç»„ä»¶é€šè¿‡ props æ¥æ”¶æ•°æ®
2. è¦ä¼ é€’æ•°æ®çŠ¶æ€çš„å­ç»„ä»¶é€šè¿‡propsæ¥æ”¶æ–¹æ³•ï¼Œè°ƒç”¨æ–¹æ³•ä¼ é€’æ•°æ®

**ä»£ç å®ç°**

```jsx
import React from 'react'

// å­ç»„ä»¶A
function SonA(props) {
  return (
    <div>
      SonA
      {props.msg}
    </div>
  )
}
// å­ç»„ä»¶B
function SonB(props) {
  return (
    <div>
      SonB
      <button onClick={() => props.changeMsg('new message')}>changeMsg</button>
    </div>
  )
}

// çˆ¶ç»„ä»¶
class App extends React.Component {
  // çˆ¶ç»„ä»¶æä¾›çŠ¶æ€æ•°æ®
  state = {
    message: 'this is message'
  }
  // çˆ¶ç»„ä»¶æä¾›ä¿®æ”¹æ•°æ®çš„æ–¹æ³•
  changeMsg = (newMsg) => {
    this.setState({
      message: newMsg
    })
  }

  render() {
    return (
      <>
        {/* æ¥æ”¶æ•°æ®çš„ç»„ä»¶ */}
        <SonA msg={this.state.message} />
        {/* ä¿®æ”¹æ•°æ®çš„ç»„ä»¶ */}
        <SonB changeMsg={this.changeMsg} />
      </>
    )
  }
}

export default App
```



### è·¨ç»„ä»¶é€šä¿¡Context

å®˜ç½‘æ–‡æ¡£ï¼šhttps://react.dev/learn/passing-data-deeply-with-context

![p9vW0zD.png](https://s1.ax1x.com/2023/05/31/p9vW0zD.png)

> ä¸Šå›¾æ˜¯ä¸€ä¸ªreactå½¢æˆçš„åµŒå¥—ç»„ä»¶æ ‘ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä»Appç»„ä»¶å‘ä»»æ„ä¸€ä¸ªä¸‹å±‚ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿç›®å‰æˆ‘ä»¬èƒ½é‡‡å–çš„æ–¹å¼å°±æ˜¯ä¸€å±‚ä¸€å±‚çš„propså¾€ä¸‹ä¼ ï¼Œæ˜¾ç„¶å¾ˆç¹ç ã€‚
>
> é‚£ä¹ˆï¼ŒContext æä¾›äº†ä¸€ä¸ª**æ— éœ€ä¸ºæ¯å±‚ç»„ä»¶æ‰‹åŠ¨æ·»åŠ  propsï¼Œå°±èƒ½åœ¨ç»„ä»¶æ ‘é—´è¿›è¡Œæ•°æ®ä¼ é€’çš„æ–¹æ³•** ã€‚

**å®ç°æ­¥éª¤**

1- åˆ›å»ºContextå¯¹è±¡ å¯¼å‡º Provider å’Œ Consumerå¯¹è±¡ 

```javascript
const { Provider, Consumer } = createContext()
```

2- ä½¿ç”¨ProvideråŒ…è£¹ä¸Šå±‚ç»„ä»¶æä¾›æ•°æ® 

```jsx
<Provider value={this.state.message}>
    {/* æ ¹ç»„ä»¶ */}
</Provider>
```

3- éœ€è¦ç”¨åˆ°æ•°æ®çš„ç»„ä»¶ä½¿ç”¨ConsumeråŒ…è£¹è·å–æ•°æ® 

```jsx
<Consumer >
    {value => /* åŸºäº context å€¼è¿›è¡Œæ¸²æŸ“*/}
</Consumer>
```

**ä»£ç å®ç°**

```jsx
import React, { createContext }  from 'react'

// 1. åˆ›å»ºContextå¯¹è±¡ 
const { Provider, Consumer } = createContext()


// 3. æ¶ˆè´¹æ•°æ®
function ComC() {
  return (
    <Consumer >
      {value => <div>{value}</div>}
    </Consumer>
  )
}

function ComA() {
  return (
    <ComC/>
  )
}

// 2. æä¾›æ•°æ®
class App extends React.Component {
  state = {
    message: 'this is message'
  }
  render() {
    return (
      <Provider value={this.state.message}>
        <div className="app">
          <ComA />
        </div>
      </Provider>
    )
  }
}

export default App
```



## Reactç»„ä»¶è¿›é˜¶

### childrenå±æ€§

**childrenå±æ€§æ˜¯ä»€ä¹ˆ**

è¡¨ç¤ºè¯¥ç»„ä»¶çš„å­èŠ‚ç‚¹ï¼Œåªè¦ç»„ä»¶å†…éƒ¨æœ‰å­èŠ‚ç‚¹ï¼Œpropsä¸­å°±æœ‰è¯¥å±æ€§

**childrenå¯ä»¥æ˜¯ä»€ä¹ˆ**

1. æ™®é€šæ–‡æœ¬
2. æ™®é€šæ ‡ç­¾å…ƒç´ 
3. å‡½æ•° / å¯¹è±¡
4. JSX

### propsæ ¡éªŒ-åœºæ™¯å’Œä½¿ç”¨

> å¯¹äºç»„ä»¶æ¥è¯´ï¼Œpropsæ˜¯ç”±å¤–éƒ¨ä¼ å…¥çš„ï¼Œæˆ‘ä»¬å…¶å®æ— æ³•ä¿è¯ç»„ä»¶ä½¿ç”¨è€…ä¼ å…¥äº†ä»€ä¹ˆæ ¼å¼çš„æ•°æ®ï¼Œå¦‚æœä¼ å…¥çš„æ•°æ®æ ¼å¼ä¸å¯¹ï¼Œå°±æœ‰å¯èƒ½ä¼šå¯¼è‡´ç»„ä»¶å†…éƒ¨é”™è¯¯ï¼Œæœ‰ä¸€ä¸ªç‚¹å¾ˆå…³é”® - **ç»„ä»¶çš„ä½¿ç”¨è€…å¯èƒ½æŠ¥é”™äº†ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆ**

çœ‹ä¸‹é¢çš„ä¾‹å­

![p9vW7es.png](https://s1.ax1x.com/2023/05/31/p9vW7es.png)

é¢å¯¹è¿™æ ·çš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ **propsæ ¡éªŒ**

**å®ç°æ­¥éª¤**

1. å®‰è£…å±æ€§æ ¡éªŒåŒ…ï¼š`yarn add prop-types`
2. å¯¼å…¥`prop-types` åŒ…
3. ä½¿ç”¨ `ç»„ä»¶å.propTypes = {}` ç»™ç»„ä»¶æ·»åŠ æ ¡éªŒè§„åˆ™

**æ ¸å¿ƒä»£ç **

```jsx
import PropTypes from 'prop-types'

const List = props => {
  const arr = props.colors
  const lis = arr.map((item, index) => <li key={index}>{item.name}</li>)
  return <ul>{lis}</ul>
}

List.propTypes = {
  colors: PropTypes.array
}
```



### propsæ ¡éªŒ-è§„åˆ™è¯´æ˜

**å››ç§å¸¸è§ç»“æ„**

1. å¸¸è§ç±»å‹ï¼šarrayã€boolã€funcã€numberã€objectã€string
2. Reactå…ƒç´ ç±»å‹ï¼šelement
3. å¿…å¡«é¡¹ï¼šisRequired
4. ç‰¹å®šçš„ç»“æ„å¯¹è±¡ï¼šshape({})

**æ ¸å¿ƒä»£ç **

```js
// å¸¸è§ç±»å‹
optionalFunc: PropTypes.func,
// å¿…å¡« åªéœ€è¦åœ¨ç±»å‹åé¢ä¸²è”ä¸€ä¸ªisRequired
requiredFunc: PropTypes.func.isRequired,
// ç‰¹å®šç»“æ„çš„å¯¹è±¡
optionalObjectWithShape: PropTypes.shape({
	color: PropTypes.string,
	fontSize: PropTypes.number
})
```

å®˜ç½‘æ–‡æ¡£æ›´å¤šé˜…è¯»ï¼šhttps://reactjs.org/docs/typechecking-with-proptypes.html



### propsæ ¡éªŒ-é»˜è®¤å€¼

> é€šè¿‡ `defaultProps` å¯ä»¥ç»™ç»„ä»¶çš„propsè®¾ç½®é»˜è®¤å€¼ï¼Œåœ¨æœªä¼ å…¥propsçš„æ—¶å€™ç”Ÿæ•ˆ ã€‚



#### 1. å‡½æ•°ç»„ä»¶

> ç›´æ¥ä½¿ç”¨å‡½æ•°å‚æ•°é»˜è®¤å€¼ã€‚

```jsx
function List({pageSize = 10}) {
  return (
    <div>
      æ­¤å¤„å±•ç¤ºpropsçš„é»˜è®¤å€¼ï¼š{ pageSize }
    </div>
  )
}

// ä¸ä¼ å…¥pageSizeå±æ€§
<List />
```



#### 2. ç±»ç»„ä»¶

> ä½¿ç”¨ç±»é™æ€å±æ€§å£°æ˜é»˜è®¤å€¼ï¼Œ`static defaultProps = {}` ã€‚

```jsx
class List extends Component {
  static defaultProps = {
    pageSize: 10
  }
  render() {
    return (
      <div>
        æ­¤å¤„å±•ç¤ºpropsçš„é»˜è®¤å€¼ï¼š{this.props.pageSize}
      </div>
    )
  }
}
<List />
```



## ç”Ÿå‘½å‘¨æœŸ

ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æŒ‡ç»„ä»¶ä»è¢«åˆ›å»ºåˆ°æŒ‚è½½åˆ°é¡µé¢ä¸­è¿è¡Œèµ·æ¥ï¼Œå†åˆ°ç»„ä»¶ä¸ç”¨æ—¶å¸è½½çš„è¿‡ç¨‹ã€‚

æ³¨æ„ï¼Œåªæœ‰ç±»ç»„ä»¶æ‰æœ‰ç”Ÿå‘½å‘¨æœŸï¼ˆç±»ç»„ä»¶ å®ä¾‹åŒ–  å‡½æ•°ç»„ä»¶ ä¸éœ€è¦å®ä¾‹åŒ–ï¼‰ã€‚

### react16ä¹‹å‰æ—§çš„ç”Ÿå‘½å‘¨æœŸ

![p9vf2nJ.png](https://s1.ax1x.com/2023/05/31/p9vf2nJ.png)



###  react16çš„ç”Ÿå‘½å‘¨æœŸ

![p9vhEEn.png](https://s1.ax1x.com/2023/05/31/p9vhEEn.png)



###  react18çš„ç”Ÿå‘½å‘¨æœŸ

![p9vhn3T.png](https://s1.ax1x.com/2023/05/31/p9vhn3T.png)



### æ–°æ—§ç”Ÿå‘½å‘¨æœŸçš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ

> åœ¨æ–°çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼ŒåºŸå¼ƒäº†æ—§ç‰ˆæœ¬çš„3ä¸ªå¸¦willçš„é’©å­ï¼Œæ–°æå‡ºäº†2ä¸ªé’©å­ã€‚
>
> æ–°ç‰ˆæœ¬ä¸­é™¤äº†componentWillUnmountä¹‹å¤–ï¼Œå…¶ä½™éƒ½éœ€è¦åŠ ä¸ŠUNSAFE_

**è¿‡æ—¶ç”Ÿå‘½å‘¨æœŸï¼š**
â‘  componentWillMount
â‘¡ componentWillReceiveProps
â‘¢ componentWillUpdate

**å³å°†è¿‡æ—¶ç”Ÿå‘½å‘¨æœŸï¼š(åœ¨æ–°ä»£ç ä¸­æˆ‘ä»¬åº”è¯¥é¿å…ä½¿ç”¨å®ƒä»¬)**
â‘  UNSAFE_componentWillMount
â‘¡ UNSAFE_componentWillReceivePorps
â‘¢ UNSAFE_componentWillUpdate

**æ–°å¢ç”Ÿå‘½å‘¨æœŸ**
â‘  getDerivedStateFromProps
â‘¡ getSnapShotBeforeUpdate
â‘¢ getDerivedStateFromError
â‘£ componentDidCatch



#### æ–°å¢ `getDerivedStateFromProps`

å®é™…å·¥ä½œä¸­åŸºæœ¬ç”¨ä¸åˆ°ä»–ã€‚

è¿™ä¸ªå‡½æ•°å‰é¢åº”åŠ staticï¼Œå› ä¸ºæ˜¯é™æ€çš„ã€‚

é€šè¿‡è¿™ä¸ªé’©å­ä¿®æ”¹çš„stateï¼Œstateä»»ä½•æ—¶å€™éƒ½å–å†³äºpropsï¼Œå…¶ä»–çš„å‡½æ•°æ— æ³•è¿›è¡Œä¿®æ”¹ã€‚

åªè¦è¿™ä¸ªé’©å­æ‹¦ç€ï¼Œæ‰€æœ‰çš„çŠ¶æ€éƒ½å¾—å¬propsçš„ã€‚



#### æ–°å¢ `getSnapshotBeforeUpdate`ç”Ÿå‘½å‘¨æœŸä¾‹å­

HTML

```html
<div id="app"></div>
```

CSS

```css
.list {
    width: 200px;
    height: 150px;
    background-color: skyblue;
    overflow: auto;
}

.news {
    height: 30px;
}
```

JS

```jsx
class Count extends React.Component {
      state = {
        newsArr: []
      }
      render() {
        return (
          <div className="list" ref={c => { this.list = c }}>
            {
              this.state.newsArr.map((n, value) => {
                return <div className="news" key={value}>{n}</div>
              })
            }
          </div>
        )
      }
      componentDidMount() {
        setInterval(() => {
          // è·å–åŸæ•°æ®
          const { newsArr } = this.state
          const news = 'æ–°é—»' + (newsArr.length + 1)
          this.setState({
            newsArr: [news, ...newsArr]
          })
        }, 200);
      }
      getSnapshotBeforeUpdate() {
        const { list } = this
        return list.scrollHeight
      }
      componentDidUpdate(props, state, xj) {
        console.log(xj);
        this.list.scrollTop += this.list.scrollHeight - xj
      }
    }
    ReactDOM.render(<Count count={109} />, document.querySelector('#app'))
```



### `component.forceUpdate()` ä¸€ä¸ªä¸å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•, å®ƒçš„ä½œç”¨å°±æ˜¯å¼ºåˆ¶åˆ·æ–°

å®˜ç½‘è§£é‡Šå¦‚ä¸‹:

- é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ç»„ä»¶çš„ state æˆ– props å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶å°†é‡æ–°æ¸²æŸ“ã€‚å¦‚æœ render() æ–¹æ³•ä¾èµ–äºå…¶ä»–æ•°æ®ï¼Œåˆ™å¯ä»¥è°ƒç”¨ forceUpdate() å¼ºåˆ¶è®©ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚
- è°ƒç”¨ forceUpdate() å°†è‡´ä½¿ç»„ä»¶è°ƒç”¨ render() æ–¹æ³•ï¼Œæ­¤æ“ä½œä¼šè·³è¿‡è¯¥ç»„ä»¶çš„ shouldComponentUpdate()ã€‚ä½†å…¶å­ç»„ä»¶ä¼šè§¦å‘æ­£å¸¸çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ŒåŒ…æ‹¬ shouldComponentUpdate() æ–¹æ³•ã€‚å¦‚æœæ ‡è®°å‘ç”Ÿå˜åŒ–ï¼ŒReact ä»å°†åªæ›´æ–° DOMã€‚
- é€šå¸¸ä½ åº”è¯¥é¿å…ä½¿ç”¨ forceUpdate()ï¼Œå°½é‡åœ¨ render() ä¸­ä½¿ç”¨ this.props å’Œ this.stateã€‚

é€šå¸¸æ¥è¯´, æˆ‘ä»¬åº”è¯¥ç”¨ `setState()` æ›´æ–°æ•°æ®,ä»è€Œé©±åŠ¨æ›´æ–°.æ‰€ä»¥ç”¨åˆ° `component.forceUpdate()` çš„æƒ…å†µå¹¶ä¸å¤šã€‚



### å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸ

![p9vfmOH.png](https://s1.ax1x.com/2023/05/31/p9vfmOH.png)

http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/



### ç”Ÿå‘½å‘¨æœŸ - æŒ‚è½½é˜¶æ®µ

![p9vhy5t.png](https://s1.ax1x.com/2023/05/31/p9vhy5t.png)

| é’©å­ å‡½æ•°         | è§¦å‘æ—¶æœº                                            | ä½œç”¨                                                         |
| ----------------- | --------------------------------------------------- | ------------------------------------------------------------ |
| constructor       | åˆ›å»ºç»„ä»¶æ—¶ï¼Œæœ€å…ˆæ‰§è¡Œï¼Œåˆå§‹åŒ–çš„æ—¶å€™åªæ‰§è¡Œä¸€æ¬¡        | 1. åˆå§‹åŒ–state  2. åˆ›å»º Ref 3. ä½¿ç”¨ bind è§£å†³ this æŒ‡å‘é—®é¢˜ç­‰ |
| render            | æ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½ä¼šè§¦å‘                                | æ¸²æŸ“UIï¼ˆ**æ³¨æ„ï¼š ä¸èƒ½åœ¨é‡Œé¢è°ƒç”¨setState()** ï¼‰               |
| componentDidMount | ç»„ä»¶æŒ‚è½½ï¼ˆå®ŒæˆDOMæ¸²æŸ“ï¼‰åæ‰§è¡Œï¼Œåˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ | 1. å‘é€ç½‘ç»œè¯·æ±‚  2.DOMæ“ä½œ                                   |



### ç”Ÿå‘½å‘¨æœŸ - æ›´æ–°é˜¶æ®µ

![p9vhhrQ.png](https://s1.ax1x.com/2023/05/31/p9vhhrQ.png)

| é’©å­å‡½æ•°           | è§¦å‘æ—¶æœº                  | ä½œç”¨                                                         |
| ------------------ | ------------------------- | ------------------------------------------------------------ |
| render             | æ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½ä¼šè§¦å‘      | æ¸²æŸ“UIï¼ˆä¸ æŒ‚è½½é˜¶æ®µ æ˜¯åŒä¸€ä¸ªrenderï¼‰                         |
| componentDidUpdate | ç»„ä»¶æ›´æ–°åï¼ˆDOMæ¸²æŸ“å®Œæ¯•ï¼‰ | DOMæ“ä½œï¼Œå¯ä»¥è·å–åˆ°æ›´æ–°åçš„DOMå†…å®¹ï¼Œ**ä¸è¦ç›´æ¥è°ƒç”¨setState** |



### ç”Ÿå‘½å‘¨æœŸ - å¸è½½é˜¶æ®µ

| é’©å­å‡½æ•°             | è§¦å‘æ—¶æœº                 | ä½œç”¨                               |
| -------------------- | ------------------------ | ---------------------------------- |
| componentWillUnmount | ç»„ä»¶å¸è½½ï¼ˆä»é¡µé¢ä¸­æ¶ˆå¤±ï¼‰ | æ‰§è¡Œæ¸…ç†å·¥ä½œï¼ˆæ¯”å¦‚ï¼šæ¸…ç†å®šæ—¶å™¨ç­‰ï¼‰ |



## HooksåŸºç¡€

### 1. ä»€ä¹ˆæ˜¯hooks

Hooksçš„æœ¬è´¨ï¼š**ä¸€å¥—èƒ½å¤Ÿä½¿å‡½æ•°ç»„ä»¶æ›´å¼ºå¤§ï¼Œæ›´çµæ´»çš„â€œé’©å­â€** ã€‚

Reactä½“ç³»é‡Œç»„ä»¶åˆ†ä¸º ç±»ç»„ä»¶ å’Œ å‡½æ•°ç»„ä»¶

ç»è¿‡å¤šå¹´çš„å®æˆ˜ï¼Œå‡½æ•°ç»„ä»¶æ˜¯ä¸€ä¸ªæ›´åŠ åŒ¹é…Reactçš„è®¾è®¡ç†å¿µ `UI = f(data)`ï¼Œä¹Ÿæ›´æœ‰åˆ©äºé€»è¾‘æ‹†åˆ†ä¸é‡ç”¨çš„ç»„ä»¶è¡¨è¾¾å½¢å¼ï¼Œè€Œå…ˆå‰çš„å‡½æ•°ç»„ä»¶æ˜¯ä¸å¯ä»¥æœ‰è‡ªå·±çš„çŠ¶æ€çš„ï¼Œä¸ºäº†èƒ½è®©å‡½æ•°ç»„ä»¶å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ï¼Œæ‰€ä»¥ä»react v16.8å¼€å§‹ï¼ŒHooksåº”è¿è€Œç”Ÿã€‚

**æ³¨æ„ç‚¹ï¼š**

1. æœ‰äº†hooksä¹‹åï¼Œä¸ºäº†å…¼å®¹è€ç‰ˆæœ¬ï¼Œclassç±»ç»„ä»¶å¹¶æ²¡æœ‰è¢«ç§»é™¤ï¼Œä¿©è€…éƒ½å¯ä»¥ä½¿ç”¨ã€‚
2. æœ‰äº†hooksä¹‹åï¼Œä¸èƒ½åœ¨æŠŠå‡½æ•°æˆä¸ºæ— çŠ¶æ€ç»„ä»¶äº†ï¼Œå› ä¸ºhooksä¸ºå‡½æ•°ç»„ä»¶æä¾›äº†çŠ¶æ€ã€‚
3. hooksåªèƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ã€‚



### 2. Hooksè§£å†³äº†ä»€ä¹ˆé—®é¢˜

>  Hooksçš„å‡ºç°è§£å†³äº†ä¿©ä¸ªé—®é¢˜   
>
>  1. ç»„ä»¶çš„çŠ¶æ€é€»è¾‘å¤ç”¨  
>  2. 2.classç»„ä»¶è‡ªèº«çš„é—®é¢˜

1.  ç»„ä»¶çš„é€»è¾‘å¤ç”¨
    åœ¨hookså‡ºç°ä¹‹å‰ï¼Œreactå…ˆåå°è¯•äº† mixinsæ··å…¥ï¼ŒHOCé«˜é˜¶ç»„ä»¶ï¼Œrender-propsç­‰æ¨¡å¼ ã€‚
    ä½†æ˜¯éƒ½æœ‰å„è‡ªçš„é—®é¢˜ï¼Œæ¯”å¦‚mixinçš„æ•°æ®æ¥æºä¸æ¸…æ™°ï¼Œé«˜é˜¶ç»„ä»¶çš„åµŒå¥—é—®é¢˜ç­‰ç­‰ ã€‚
2.  classç»„ä»¶è‡ªèº«çš„é—®é¢˜
    classç»„ä»¶å°±åƒä¸€ä¸ªåšé‡çš„â€˜æˆ˜èˆ°â€™ ä¸€æ ·ï¼Œå¤§è€Œå…¨ï¼Œæä¾›äº†å¾ˆå¤šä¸œè¥¿ï¼Œæœ‰ä¸å¯å¿½è§†çš„å­¦ä¹ æˆæœ¬ï¼Œæ¯”å¦‚å„ç§ç”Ÿå‘½å‘¨æœŸï¼ŒthisæŒ‡å‘é—®é¢˜ç­‰ç­‰ï¼Œè€Œæˆ‘ä»¬æ›´å¤šæ—¶å€™éœ€è¦çš„æ˜¯ä¸€ä¸ªè½»å¿«çµæ´»çš„'å¿«è‰‡' ã€‚



## useState

### 1. åŸºç¡€ä½¿ç”¨

**ä½œç”¨**

useStateä¸ºå‡½æ•°ç»„ä»¶æä¾›çŠ¶æ€ï¼ˆstateï¼‰

**ä½¿ç”¨æ­¥éª¤**

1. å¯¼å…¥ `useState` å‡½æ•°
2. è°ƒç”¨ `useState` å‡½æ•°ï¼Œå¹¶ä¼ å…¥çŠ¶æ€çš„åˆå§‹å€¼
3. ä»`useState`å‡½æ•°çš„è¿”å›å€¼ä¸­ï¼Œæ‹¿åˆ°çŠ¶æ€å’Œä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•
4. åœ¨JSXä¸­å±•ç¤ºçŠ¶æ€
5. è°ƒç”¨ä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•æ›´æ–°çŠ¶æ€

**ä»£ç å®ç°**

```jsx
import { useState } from 'react'

function App() {
  // å‚æ•°ï¼šçŠ¶æ€åˆå§‹å€¼æ¯”å¦‚,ä¼ å…¥ 0 è¡¨ç¤ºè¯¥çŠ¶æ€çš„åˆå§‹å€¼ä¸º 0
  // è¿”å›å€¼ï¼šæ•°ç»„,åŒ…å«ä¸¤ä¸ªå€¼ï¼š1 çŠ¶æ€å€¼ï¼ˆstateï¼‰ 2 ä¿®æ”¹è¯¥çŠ¶æ€çš„å‡½æ•°ï¼ˆsetStateï¼‰
  const [count, setCount] = useState(0)
  return (
    <button onClick={() => { setCount(count + 1) }}>{count}</button>
  )
}
export default App
```



### 2. çŠ¶æ€çš„è¯»å–å’Œä¿®æ”¹

**è¯»å–çŠ¶æ€**

è¯¥æ–¹å¼æä¾›çš„çŠ¶æ€ï¼Œæ˜¯å‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡ï¼Œå¯ä»¥åœ¨å‡½æ•°å†…çš„ä»»æ„ä½ç½®ä½¿ç”¨

**ä¿®æ”¹çŠ¶æ€**

1. setCountæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°è¡¨ç¤º`æœ€æ–°çš„çŠ¶æ€å€¼`
2. è°ƒç”¨è¯¥å‡½æ•°åï¼Œå°†ä½¿ç”¨æ–°å€¼æ›¿æ¢æ—§å€¼
3. ä¿®æ”¹çŠ¶æ€åï¼Œç”±äºçŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œä¼šå¼•èµ·è§†å›¾å˜åŒ–

**æ³¨æ„äº‹é¡¹**

1. ä¿®æ”¹çŠ¶æ€çš„æ—¶å€™ï¼Œä¸€å®šè¦ä½¿ç”¨æ–°çš„çŠ¶æ€æ›¿æ¢æ—§çš„çŠ¶æ€ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹æ—§çš„çŠ¶æ€ï¼Œå°¤å…¶æ˜¯å¼•ç”¨ç±»å‹



### 3. ç»„ä»¶çš„æ›´æ–°è¿‡ç¨‹

å‡½æ•°ç»„ä»¶ä½¿ç”¨ **useState** hook åçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œä»¥åŠçŠ¶æ€å€¼çš„å˜åŒ–ã€‚

- ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“ 

1. 1. ä»å¤´å¼€å§‹æ‰§è¡Œè¯¥ç»„ä»¶ä¸­çš„ä»£ç é€»è¾‘
   2. è°ƒç”¨ `useState(0)` å°†ä¼ å…¥çš„å‚æ•°ä½œä¸ºçŠ¶æ€åˆå§‹å€¼ï¼Œå³ï¼š0
   3. æ¸²æŸ“ç»„ä»¶ï¼Œæ­¤æ—¶ï¼Œè·å–åˆ°çš„çŠ¶æ€ count å€¼ä¸ºï¼š 0

- ç»„ä»¶ç¬¬äºŒæ¬¡æ¸²æŸ“ 

1. 1. ç‚¹å‡»æŒ‰é’®ï¼Œè°ƒç”¨ `setCount(count + 1)` ä¿®æ”¹çŠ¶æ€ï¼Œå› ä¸ºçŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥ï¼Œè¯¥ç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“
   2. ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œä¼šå†æ¬¡æ‰§è¡Œè¯¥ç»„ä»¶ä¸­çš„ä»£ç é€»è¾‘
   3. å†æ¬¡è°ƒç”¨ `useState(0)`ï¼Œæ­¤æ—¶ **React å†…éƒ¨ä¼šæ‹¿åˆ°æœ€æ–°çš„çŠ¶æ€å€¼è€Œéåˆå§‹å€¼**ï¼Œæ¯”å¦‚ï¼Œè¯¥æ¡ˆä¾‹ä¸­æœ€æ–°çš„çŠ¶æ€å€¼ä¸º 1
   4. å†æ¬¡æ¸²æŸ“ç»„ä»¶ï¼Œæ­¤æ—¶ï¼Œè·å–åˆ°çš„çŠ¶æ€ count å€¼ä¸ºï¼š1



æ³¨æ„ï¼š

â€‹	**useState çš„åˆå§‹å€¼(å‚æ•°)åªä¼šåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ç”Ÿæ•ˆ**ã€‚

â€‹	ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥åçš„æ¯æ¬¡æ¸²æŸ“ï¼ŒuseState è·å–åˆ°éƒ½æ˜¯æœ€æ–°çš„çŠ¶æ€å€¼ï¼ŒReact ç»„ä»¶ä¼šè®°ä½æ¯æ¬¡æœ€æ–°çš„çŠ¶æ€å€¼ ã€‚

```jsx
import { useState } from 'react'

function App() {
  const [count, setCount] = useState(0)
  // åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œæ‰“å°æµ‹è¯•
  console.log(count)
  return (
    <button onClick={() => { setCount(count + 1) }}>{count}</button>
  )
}
export default App
```



### 4. ä½¿ç”¨è§„åˆ™

1.  `useState` å‡½æ•°å¯ä»¥æ‰§è¡Œå¤šæ¬¡ï¼Œæ¯æ¬¡æ‰§è¡Œäº’ç›¸ç‹¬ç«‹ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡ä¸ºå‡½æ•°ç»„ä»¶æä¾›ä¸€ä¸ªçŠ¶æ€ 

```jsx
function List(){
  // ä»¥å­—ç¬¦ä¸²ä¸ºåˆå§‹å€¼
  const [name, setName] = useState('cp')
  // ä»¥æ•°ç»„ä¸ºåˆå§‹å€¼
  const [list,setList] = useState([])
}
```

2. `useState` æ³¨æ„äº‹é¡¹ 

   a. åªèƒ½å‡ºç°åœ¨å‡½æ•°ç»„ä»¶æˆ–è€…å…¶ä»–hookå‡½æ•°ä¸­ 

   b. ä¸èƒ½åµŒå¥—åœ¨if/for/å…¶å®ƒå‡½æ•°ä¸­ï¼ˆreactæŒ‰ç…§hooksçš„è°ƒç”¨é¡ºåºè¯†åˆ«æ¯ä¸€ä¸ªhookï¼‰


```jsx
let num = 1
function List(){
  num++
  if(num / 2 === 0){
     const [name, setName] = useState('cp') 
  }
  const [list,setList] = useState([])
}
// ä¿©ä¸ªhookçš„é¡ºåºä¸æ˜¯å›ºå®šçš„ï¼Œè¿™æ˜¯ä¸å¯ä»¥çš„ï¼ï¼ï¼
```

   c. å¯ä»¥é€šè¿‡å¼€å‘è€…å·¥å…·æŸ¥çœ‹hooksçŠ¶æ€



## useEffect

### 1. ç†è§£å‡½æ•°å‰¯ä½œç”¨

**ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨**

å‰¯ä½œç”¨æ˜¯ç›¸å¯¹äºä¸»ä½œç”¨æ¥è¯´çš„ï¼Œä¸€ä¸ªå‡½æ•°é™¤äº†ä¸»ä½œç”¨ï¼Œå…¶ä»–çš„ä½œç”¨å°±æ˜¯å‰¯ä½œç”¨ã€‚å¯¹äº React ç»„ä»¶æ¥è¯´ï¼Œ**ä¸»ä½œç”¨å°±æ˜¯æ ¹æ®æ•°æ®ï¼ˆstate/propsï¼‰æ¸²æŸ“ UI**ï¼Œé™¤æ­¤ä¹‹å¤–éƒ½æ˜¯å‰¯ä½œç”¨ï¼ˆæ¯”å¦‚ï¼Œæ‰‹åŠ¨ä¿®æ”¹ DOMï¼‰

**å¸¸è§çš„å‰¯ä½œç”¨**

1. æ•°æ®è¯·æ±‚ ajaxå‘é€
2. æ‰‹åŠ¨ä¿®æ”¹dom
3. localstorageæ“ä½œ

useEffectå‡½æ•°çš„ä½œç”¨å°±æ˜¯ä¸ºreactå‡½æ•°ç»„ä»¶æä¾›å‰¯ä½œç”¨å¤„ç†çš„ï¼



### 2. åŸºç¡€ä½¿ç”¨

**ä½œç”¨**

> ä¸ºreactå‡½æ•°ç»„ä»¶æä¾›å‰¯ä½œç”¨å¤„ç†

**ä½¿ç”¨æ­¥éª¤**

1. å¯¼å…¥ `useEffect` å‡½æ•°
2. è°ƒç”¨ `useEffect` å‡½æ•°ï¼Œå¹¶ä¼ å…¥å›è°ƒå‡½æ•°
3. åœ¨å›è°ƒå‡½æ•°ä¸­ç¼–å†™å‰¯ä½œç”¨å¤„ç†ï¼ˆdomæ“ä½œï¼‰
4. ä¿®æ”¹æ•°æ®çŠ¶æ€
5. æ£€æµ‹å‰¯ä½œç”¨æ˜¯å¦ç”Ÿæ•ˆ

**ä»£ç å®ç°**

```jsx
import { useEffect, useState } from 'react'

function App() {
  const [count, setCount] = useState(0)
 
  useEffect(()=>{
    // domæ“ä½œ
    document.title = `å½“å‰å·²ç‚¹å‡»äº†${count}æ¬¡`
  })
  return (
    <button onClick={() => { setCount(count + 1) }}>{count}</button>
  )
}

export default App
```



### 3. ä¾èµ–é¡¹æ§åˆ¶æ‰§è¡Œæ—¶æœº

**1. ä¸æ·»åŠ ä¾èµ–é¡¹**

> ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ‰§è¡Œä¸€æ¬¡ï¼Œä»¥åŠä¸ç®¡æ˜¯å“ªä¸ªçŠ¶æ€æ›´æ”¹å¼•èµ·ç»„ä»¶æ›´æ–°æ—¶éƒ½ä¼šé‡æ–°æ‰§è¡Œ
>
> 1. ç»„ä»¶åˆå§‹æ¸²æŸ“
> 2. ç»„ä»¶æ›´æ–° ï¼ˆä¸ç®¡æ˜¯å“ªä¸ªçŠ¶æ€å¼•èµ·çš„æ›´æ–°ï¼‰

```jsx
useEffect(()=>{
    console.log('å‰¯ä½œç”¨æ‰§è¡Œäº†')
})
```

**2. æ·»åŠ ç©ºæ•°ç»„**

> ç»„ä»¶åªåœ¨é¦–æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡

```jsx
useEffect(()=>{
	 console.log('å‰¯ä½œç”¨æ‰§è¡Œäº†')
},[])
```

**3. æ·»åŠ ç‰¹å®šä¾èµ–é¡¹**

> å‰¯ä½œç”¨å‡½æ•°åœ¨é¦–æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œï¼Œåœ¨ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ‰§è¡Œ

```jsx
function App() {  
    const [count, setCount] = useState(0)  
    const [name, setName] = useState('zs') 
    
    useEffect(() => {    
        console.log('å‰¯ä½œç”¨æ‰§è¡Œäº†')  
    }, [count])  
    
    return (    
        <>      
         <button onClick={() => { setCount(count + 1) }}>{count}</button>      
         <button onClick={() => { setName('cp') }}>{name}</button>    
        </>  
    )
}
```

**æ³¨æ„äº‹é¡¹**

useEffect å›è°ƒå‡½æ•°ä¸­ç”¨åˆ°çš„æ•°æ®ï¼ˆæ¯”å¦‚ï¼Œcountï¼‰å°±æ˜¯ä¾èµ–æ•°æ®ï¼Œå°±åº”è¯¥å‡ºç°åœ¨ä¾èµ–é¡¹æ•°ç»„ä¸­ï¼Œå¦‚æœä¸æ·»åŠ ä¾èµ–é¡¹å°±ä¼šæœ‰bugå‡ºç° ã€‚



### 4. æ¸…ç†å‰¯ä½œç”¨

> å¦‚æœæƒ³è¦æ¸…ç†å‰¯ä½œç”¨ å¯ä»¥åœ¨å‰¯ä½œç”¨å‡½æ•°ä¸­çš„æœ«å°¾returnä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨æ–°çš„å‡½æ•°ä¸­ç¼–å†™æ¸…ç†å‰¯ä½œç”¨çš„é€»è¾‘
>
> æ³¨æ„æ‰§è¡Œæ—¶æœºä¸ºï¼š
>
> 1. ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨æ‰§è¡Œ
> 2. ç»„ä»¶æ›´æ–°æ—¶ï¼Œä¸‹ä¸€ä¸ªuseEffectå‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œä¹‹å‰è‡ªåŠ¨æ‰§è¡Œ

```jsx
import { useEffect, useState } from "react"

const App = () => {
  const [count, setCount] = useState(0)
  useEffect(() => {
    const timerId = setInterval(() => {
      setCount(count + 1)
    }, 1000)
    return () => {
      // ç”¨æ¥æ¸…ç†å‰¯ä½œç”¨çš„äº‹æƒ…
      clearInterval(timerId)
    }
  }, [count])
  return (
    <div>
      {count}
    </div>
  )
}

export default App
```



## Hooksè¿›é˜¶

### useState - å›è°ƒå‡½æ•°çš„å‚æ•°

**ä½¿ç”¨åœºæ™¯**

å‚æ•°åªä¼šåœ¨ç»„ä»¶çš„åˆå§‹æ¸²æŸ“ä¸­èµ·ä½œç”¨ï¼Œåç»­æ¸²æŸ“æ—¶ä¼šè¢«å¿½ç•¥ã€‚

å¦‚æœåˆå§‹ state éœ€è¦é€šè¿‡è®¡ç®—æ‰èƒ½è·å¾—ï¼Œåˆ™å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å‡½æ•°ä¸­è®¡ç®—å¹¶è¿”å›åˆå§‹çš„ stateï¼Œæ­¤å‡½æ•°åªåœ¨åˆå§‹æ¸²æŸ“æ—¶è¢«è°ƒç”¨ã€‚

**è¯­æ³•**

```jsx
const [name, setName] = useState(()=>{   
  // ç¼–å†™è®¡ç®—é€»è¾‘    return 'è®¡ç®—ä¹‹åçš„åˆå§‹å€¼'
})
```

**è¯­æ³•è§„åˆ™**

1. å›è°ƒå‡½æ•°returnå‡ºå»çš„å€¼å°†ä½œä¸º `name` çš„åˆå§‹å€¼ã€‚
2. å›è°ƒå‡½æ•°ä¸­çš„é€»è¾‘åªä¼šåœ¨ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ã€‚

**è¯­æ³•é€‰æ‹©**

1. å¦‚æœå°±æ˜¯åˆå§‹åŒ–ä¸€ä¸ªæ™®é€šçš„æ•°æ® ç›´æ¥ä½¿ç”¨ `useState(æ™®é€šæ•°æ®)` å³å¯ã€‚
2. å¦‚æœè¦åˆå§‹åŒ–çš„æ•°æ®æ— æ³•ç›´æ¥å¾—åˆ°éœ€è¦é€šè¿‡è®¡ç®—æ‰èƒ½è·å–åˆ°ï¼Œä½¿ç”¨`useState(()=>{})` ã€‚

**æ¥ä¸ªéœ€æ±‚**

```jsx
import { useState } from 'react'

function Counter(props) {
  const [count, setCount] = useState(() => {
    return props.count
  })
  return (
    <div>
      <button onClick={() => setCount(count + 1)}>{count}</button>
    </div>
  )
}

function App() {
  return (
    <>
      <Counter count={10} />
      <Counter count={20} />
    </>
  )
}

export default App
```



### useEffect - å‘é€ç½‘ç»œè¯·æ±‚

**ä½¿ç”¨åœºæ™¯**

> å¦‚ä½•åœ¨useEffectä¸­å‘é€ç½‘ç»œè¯·æ±‚ï¼Œå¹¶ä¸”å°è£…åŒæ­¥ async awaitæ“ä½œ ã€‚

**è¯­æ³•è¦æ±‚**

> ä¸å¯ä»¥ç›´æ¥åœ¨useEffectçš„å›è°ƒå‡½æ•°å¤–å±‚ç›´æ¥åŒ…è£¹ await ï¼Œå› ä¸º**å¼‚æ­¥ä¼šå¯¼è‡´æ¸…ç†å‡½æ•°æ— æ³•ç«‹å³è¿”å›** ã€‚

```jsx
useEffect(async ()=>{    
    const res = await axios.get('http://geek.itheima.net/v1_0/channels')   
    console.log(res)
},[])
```

**æ­£ç¡®å†™æ³•**

åœ¨å†…éƒ¨å•ç‹¬å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæŠŠè¿™ä¸ªå‡½æ•°åŒ…è£…æˆåŒæ­¥

```jsx
useEffect(()=>{   
    async function fetchData(){      
       const res = await axios.get('http://geek.itheima.net/v1_0/channels')                            console.log(res)   
    } 
},[])
```



### useRef - çœŸå®çš„domå…ƒç´ 

**ä½¿ç”¨åœºæ™¯**

åœ¨å‡½æ•°ç»„ä»¶ä¸­è·å–çœŸå®çš„domå…ƒç´ å¯¹è±¡æˆ–è€…æ˜¯ç»„ä»¶å¯¹è±¡

**ä½¿ç”¨æ­¥éª¤**

1. å¯¼å…¥ `useRef` å‡½æ•°
2. æ‰§è¡Œ `useRef` å‡½æ•°å¹¶ä¼ å…¥nullï¼Œè¿”å›å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ å†…éƒ¨æœ‰ä¸€ä¸ªcurrentå±æ€§å­˜æ”¾æ‹¿åˆ°çš„domå¯¹è±¡ï¼ˆç»„ä»¶å®ä¾‹ï¼‰
3. é€šè¿‡ref ç»‘å®š è¦è·å–çš„å…ƒç´ æˆ–è€…ç»„ä»¶

**è·å–dom**

```jsx
import { useEffect, useRef } from 'react'
function App() {  
    const h1Ref = useRef(null)  
    useEffect(() => {    
        console.log(h1Ref)  
    },[])  
    return (    
        <div>      
            <h1 ref={ h1Ref }>this is h1</h1>    
        </div>  
    )
}
export default App
```

**è·å–ç»„ä»¶å®ä¾‹**

> å‡½æ•°ç»„ä»¶ç”±äºæ²¡æœ‰å®ä¾‹ï¼Œä¸èƒ½ä½¿ç”¨refè·å–ï¼Œå¦‚æœæƒ³è·å–ç»„ä»¶å®ä¾‹ï¼Œå¿…é¡»æ˜¯ç±»ç»„ä»¶

Foo.js

```jsx
class Foo extends React.Component {  
    sayHi = () => {    
        console.log('say hi')  
    }  
    render(){    
        return <div>Foo</div>  
    }
}
    
export default Foo
```

App.js

```jsx
import { useEffect, useRef } from 'react'
import Foo from './Foo'
function App() {  
    const h1Foo = useRef(null)  
    useEffect(() => {    
        console.log(h1Foo)  
    }, [])  
    return (    
        <div> <Foo ref={ h1Foo } /></div>  
    )
}
export default App
```



### useContext - è·¨ç»„ä»¶é€šä¿¡

**å®ç°æ­¥éª¤**

1. ä½¿ç”¨`createContext` åˆ›å»ºContextå¯¹è±¡
2. åœ¨é¡¶å±‚ç»„ä»¶é€šè¿‡`Provider` æä¾›æ•°æ®
3. åœ¨åº•å±‚ç»„ä»¶é€šè¿‡`useContext`å‡½æ•°è·å–æ•°æ®

**ä»£ç å®ç°**

```jsx
import { createContext, useContext } from 'react'
// åˆ›å»ºContextå¯¹è±¡
const Context = createContext()

// çˆ¸ç»„ä»¶
function Foo() {  
    return <div>Foo <Bar/></div>
}

// å­™ç»„ä»¶
function Bar() {  
    // åº•å±‚ç»„ä»¶é€šè¿‡useContextå‡½æ•°è·å–æ•°æ®  
    const name = useContext(Context)  
    return <div>Bar {name}</div>
}

// çˆ·ç»„ä»¶
function App() {  
    return (    
        // é¡¶å±‚ç»„ä»¶é€šè¿‡Provider æä¾›æ•°æ®    
        <Context.Provider value={'this is name'}>     
            <div><Foo/></div>    
        </Context.Provider>  
    )
}

export default App
```

